(()=>{var As=Object.defineProperty;var Ss=Object.getOwnPropertySymbols;var pi=Object.prototype.hasOwnProperty,gi=Object.prototype.propertyIsEnumerable;var nt=(s,e,t)=>e in s?As(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,ot=(s,e)=>{for(var t in e||(e={}))pi.call(e,t)&&nt(s,t,e[t]);if(Ss)for(var t of Ss(e))gi.call(e,t)&&nt(s,t,e[t]);return s};var x=(s,e)=>()=>(s&&(e=s(s=0)),e);var vi=(s,e)=>{for(var t in e)As(s,t,{get:e[t],enumerable:!0})};var Ts=(s,e,t)=>(nt(s,typeof e!="symbol"?e+"":e,t),t);var c=(s,e,t)=>new Promise((i,r)=>{var n=l=>{try{a(t.next(l))}catch(h){r(h)}},o=l=>{try{a(t.throw(l))}catch(h){r(h)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(n,o);a((t=t.apply(s,e)).next())});var _,Ue=x(()=>{_={logger:self.console,WebSocket:self.WebSocket}});var d,ie=x(()=>{Ue();d={log(...s){this.enabled&&(s.push(Date.now()),_.logger.log("[ActionCable]",...s))}}});var pe,ze,ge,Ge,Pt=x(()=>{ie();pe=()=>new Date().getTime(),ze=s=>(pe()-s)/1e3,ge=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=pe(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),d.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=pe(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),d.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=pe()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,d.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=pe(),d.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),n=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+n)}reconnectIfStale(){this.connectionIsStale()&&(d.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${ze(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?d.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${ze(this.disconnectedAt)} s`):(d.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return ze(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&ze(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(d.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};ge.staleThreshold=6;ge.reconnectionBackoffRate=.15;Ge=ge});var ve,xt=x(()=>{ve={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var be,Je,wr,$s,ye,Qe,It=x(()=>{Ue();Pt();xt();ie();({message_types:be,protocols:Je}=ve),wr=Je.slice(0,Je.length-1),$s=[].indexOf,ye=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Ge(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){return this.isActive()?(d.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(d.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${Je}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new _.WebSocket(this.consumer.url,Je),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(d.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){d.log("Failed to reopen WebSocket",e)}finally{d.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return $s.call(wr,this.getProtocol())>=0}isState(...e){return $s.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in _.WebSocket)if(_.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};ye.reopenDelay=500;ye.prototype.events={message(s){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:r,type:n}=JSON.parse(s.data);switch(n){case be.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case be.disconnect:return d.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:r});case be.ping:return this.monitor.recordPing();case be.confirmation:return this.subscriptions.confirmSubscription(e),this.subscriptions.notify(e,"connected");case be.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(d.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return d.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(s){if(d.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){d.log("WebSocket onerror event")}};Qe=ye});var Sr,Q,Bt=x(()=>{Sr=function(s,e){if(e!=null)for(let t in e){let i=e[t];s[t]=i}return s},Q=class{constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),Sr(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Nt,Xe,Dt=x(()=>{ie();Nt=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(d.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):d.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){d.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{d.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Xe=Nt});var X,$t=x(()=>{Bt();Dt();ie();X=class{constructor(e){this.consumer=e,this.guarantor=new Xe(this),this.subscriptions=[]}create(e,t){let i=e,r=typeof i=="object"?i:{channel:i},n=new Q(this.consumer,r,t);return this.add(n)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let r;return typeof e=="string"?r=this.findAll(e):r=[e],r.map(n=>typeof n[t]=="function"?n[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){d.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function Vt(s){if(typeof s=="function"&&(s=s()),s&&!/^wss?:/i.test(s)){let e=document.createElement("a");return e.href=s,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return s}var re,Vs=x(()=>{It();$t();re=class{constructor(e){this._url=e,this.subscriptions=new X(this),this.connection=new Qe(this)}get url(){return Vt(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}});var js={};vi(js,{Connection:()=>Qe,ConnectionMonitor:()=>Ge,Consumer:()=>re,INTERNAL:()=>ve,Subscription:()=>Q,SubscriptionGuarantor:()=>Xe,Subscriptions:()=>X,adapters:()=>_,createConsumer:()=>Ar,createWebSocketURL:()=>Vt,getConfig:()=>qs,logger:()=>d});function Ar(s=qs("url")||ve.default_mount_path){return new re(s)}function qs(s){let e=document.head.querySelector(`meta[name='action-cable-${s}']`);if(e)return e.getAttribute("content")}var Hs=x(()=>{It();Pt();Vs();xt();Bt();$t();Dt();Ue();ie()});(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;let s=HTMLElement,e={HTMLElement:function(){return Reflect.construct(s,[],this.constructor)}};window.HTMLElement=e.HTMLElement,HTMLElement.prototype=s.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,s)})();(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,r){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==r||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,r,n){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",n)}})(HTMLFormElement.prototype);var Ms=new WeakMap;function bi(s){let e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return(t==null?void 0:t.type)=="submit"?t:null}function yi(s){let e=bi(s.target);e&&e.form&&Ms.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))s=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",yi,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Ms.get(this.target)}})})();var j;(function(s){s.eager="eager",s.lazy="lazy"})(j||(j={}));var R=class extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new R.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="complete"?this.delegate.completeChanged():e=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get loading(){return Ei(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,t;return(t=(e=this.ownerDocument)===null||e===void 0?void 0:e.documentElement)===null||t===void 0?void 0:t.hasAttribute("data-turbo-preview")}};function Ei(s){switch(s.toLowerCase()){case"lazy":return j.lazy;default:return j.eager}}function S(s){return new URL(s.toString(),document.baseURI)}function G(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function Rt(s,e){let t=(e==null?void 0:e.getAttribute("formaction"))||s.getAttribute("action")||s.action;return S(t)}function wi(s){return(Li(s).match(/\.[^.]*$/)||[])[0]||""}function Si(s){return!!wi(s).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function Ai(s,e){let t=Oi(e);return s.href===S(t).href||s.href.startsWith(t)}function ee(s,e){return Ai(s,e)&&Si(s)}function at(s){let e=G(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function Pe(s){return at(s)}function Ti(s,e){return S(s).href==S(e).href}function Ci(s){return s.pathname.split("/").slice(1)}function Li(s){return Ci(s).slice(-1)[0]}function Oi(s){return ki(s.origin+s.pathname)}function ki(s){return s.endsWith("/")?s:s+"/"}var ae=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return S(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function ce(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let e=document.createElement("script"),t=Be("csp-nonce");return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,Mi(e,s),e}}function Mi(s,e){for(let{name:t,value:i}of e.attributes)s.setAttribute(t,i)}function Fi(s){let e=document.createElement("template");return e.innerHTML=s,e.content}function E(s,{target:e,cancelable:t,detail:i}={}){let r=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function xe(){return new Promise(s=>requestAnimationFrame(()=>s()))}function Ri(){return new Promise(s=>setTimeout(()=>s(),0))}function Pi(){return Promise.resolve()}function Fs(s=""){return new DOMParser().parseFromString(s,"text/html")}function Rs(s,...e){let t=xi(s,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),r=i?i[0].length:0;return t.map(n=>n.slice(r)).join(`
`)}function xi(s,e){return s.reduce((t,i,r)=>{let n=e[r]==null?"":e[r];return t+i+n},"")}function te(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Ie(s,...e){for(let t of e.map(i=>i==null?void 0:i.getAttribute(s)))if(typeof t=="string")return t;return null}function Ii(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function ct(...s){for(let e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function lt(...s){for(let e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function Bi(s,e=2e3){return new Promise(t=>{let i=()=>{s.removeEventListener("error",i),s.removeEventListener("load",i),t()};s.addEventListener("load",i,{once:!0}),s.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function Ps(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Ni(s){return s=="advance"||s=="replace"||s=="restore"}function _e(...s){let e=Ie("data-turbo-action",...s);return Ni(e)?e:null}function xs(s){return document.querySelector(`meta[name="${s}"]`)}function Be(s){let e=xs(s);return e&&e.content}function Di(s,e){let t=xs(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function Ne(s,e){var t;if(s instanceof Element)return s.closest(e)||Ne(s.assignedSlot||((t=s.getRootNode())===null||t===void 0?void 0:t.host),e)}var A;(function(s){s[s.get=0]="get",s[s.post=1]="post",s[s.put=2]="put",s[s.patch=3]="patch",s[s.delete=4]="delete"})(A||(A={}));function $i(s){switch(s.toLowerCase()){case"get":return A.get;case"post":return A.post;case"put":return A.put;case"patch":return A.patch;case"delete":return A.delete}}var le=class{constructor(e,t,i,r=new URLSearchParams,n=null){this.abortController=new AbortController,this.resolveRequestPromise=o=>{},this.delegate=e,this.method=t,this.headers=this.defaultHeaders,this.body=r,this.url=i,this.target=n}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}perform(){return c(this,null,function*(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this),yield this.allowRequestToBeIntercepted(e);try{this.delegate.requestStarted(this);let t=yield fetch(this.url.href,e);return yield this.receive(t)}catch(t){if(t.name!=="AbortError")throw this.willDelegateErrorHandling(t)&&this.delegate.requestErrored(this,t),t}finally{this.delegate.requestFinished(this)}})}receive(e){return c(this,null,function*(){let t=new ae(e);return E("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t})}get fetchOptions(){var e;return{method:A[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(e=this.delegate.referrer)===null||e===void 0?void 0:e.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===A.get}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}allowRequestToBeIntercepted(e){return c(this,null,function*(){let t=new Promise(r=>this.resolveRequestPromise=r);E("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&(yield t)})}willDelegateErrorHandling(e){return!E("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}},ht=class{constructor(e,t){this.started=!1,this.intersect=i=>{let r=i.slice(-1)[0];r!=null&&r.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},N=class{static wrap(e){return typeof e=="string"?new this(Fi(e)):e}constructor(e){this.fragment=Vi(e)}};N.contentType="text/vnd.turbo-stream.html";function Vi(s){for(let e of s.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(ce(i));e.replaceWith(t)}return s}var V;(function(s){s[s.initialized=0]="initialized",s[s.requesting=1]="requesting",s[s.waiting=2]="waiting",s[s.receiving=3]="receiving",s[s.stopping=4]="stopping",s[s.stopped=5]="stopped"})(V||(V={}));var q;(function(s){s.urlEncoded="application/x-www-form-urlencoded",s.multipart="multipart/form-data",s.plain="text/plain"})(q||(q={}));function qi(s){switch(s.toLowerCase()){case q.multipart:return q.multipart;case q.plain:return q.plain;default:return q.urlEncoded}}var J=class{static confirmMethod(e,t,i){return Promise.resolve(confirm(e))}constructor(e,t,i,r=!1){this.state=V.initialized,this.delegate=e,this.formElement=t,this.submitter=i,this.formData=ji(t,i),this.location=S(this.action),this.method==A.get&&Ki(this.location,[...this.body.entries()]),this.fetchRequest=new le(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}get method(){var e;let t=((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return $i(t.toLowerCase())||A.get}get action(){var e;let t=typeof this.formElement.action=="string"?this.formElement.action:null;return!((e=this.submitter)===null||e===void 0)&&e.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||t||""}get body(){return this.enctype==q.urlEncoded||this.method==A.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var e;return qi(((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((e,[t,i])=>e.concat(typeof i=="string"?[[t,i]]:[]),[])}start(){return c(this,null,function*(){let{initialized:e,requesting:t}=V,i=Ie("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!(yield J.confirmMethod(i,this.formElement,this.submitter)))&&this.state==e)return this.state=t,this.fetchRequest.perform()})}stop(){let{stopping:e,stopped:t}=V;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=Hi(Be("csrf-param"))||Be("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(N.contentType)}requestStarted(e){var t;this.state=V.waiting,(t=this.submitter)===null||t===void 0||t.setAttribute("disabled",""),this.setSubmitsWith(),E("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError)this.delegate.formSubmissionFailedWithResponse(this,t);else if(this.requestMustRedirect(e)&&_i(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=V.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){var t;this.state=V.stopped,(t=this.submitter)===null||t===void 0||t.removeAttribute("disabled"),this.resetSubmitterText(),E("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||Ii("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)===null||e===void 0?void 0:e.getAttribute("data-turbo-submits-with")}};function ji(s,e){let t=new FormData(s),i=e==null?void 0:e.getAttribute("name"),r=e==null?void 0:e.getAttribute("value");return i&&t.append(i,r||""),t}function Hi(s){if(s!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(s));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function _i(s){return s.statusCode==200&&!s.redirected}function Ki(s,e){let t=new URLSearchParams;for(let[i,r]of e)r instanceof File||t.append(i,r);return s.search=t.toString(),s}var se=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){let e="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(let t of this.element.querySelectorAll("[autofocus]"))if(t.closest(e)==null)return t;return null}get permanentElements(){return Bs(this.element)}getPermanentElementById(e){return Is(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:r}=i,n=e.getPermanentElementById(r);n&&(t[r]=[i,n])}return t}};function Is(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function Bs(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var he=class{constructor(e,t){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=i=>{if(!i.defaultPrevented){let r=i.target instanceof HTMLFormElement?i.target:void 0,n=i.submitter||void 0;r&&Wi(r,n)&&Ui(r,n)&&this.delegate.willSubmitForm(r,n)&&(i.preventDefault(),i.stopImmediatePropagation(),this.delegate.formSubmitted(r,n))}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}};function Wi(s,e){return((e==null?void 0:e.getAttribute("formmethod"))||s.getAttribute("method"))!="dialog"}function Ui(s,e){if((e==null?void 0:e.hasAttribute("formtarget"))||s.hasAttribute("target")){let t=(e==null?void 0:e.getAttribute("formtarget"))||s.target;for(let i of document.getElementsByName(t))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}var De=class{constructor(e,t){this.resolveRenderPromise=i=>{},this.resolveInterceptionPromise=i=>{},this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(G(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}render(e){return c(this,null,function*(){let{isPreview:t,shouldRender:i,newSnapshot:r}=e;if(i)try{this.renderPromise=new Promise(l=>this.resolveRenderPromise=l),this.renderer=e,yield this.prepareToRenderSnapshot(e);let n=new Promise(l=>this.resolveInterceptionPromise=l),o={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(r,o)||(yield n),yield this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(e.reloadReason)})}invalidate(e){this.delegate.viewInvalidated(e)}prepareToRenderSnapshot(e){return c(this,null,function*(){this.markAsPreview(e.isPreview),yield e.prepareToRender()})}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}renderSnapshot(e){return c(this,null,function*(){yield e.render()})}finishRenderingSnapshot(e){e.finishRendering()}},ut=class extends De{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new se(this.element)}},$e=class{constructor(e,t){this.clickBubbled=i=>{this.respondsToEventTarget(i.target)?this.clickEvent=i:delete this.clickEvent},this.linkClicked=i=>{this.clickEvent&&this.respondsToEventTarget(i.target)&&i.target instanceof Element&&this.delegate.shouldInterceptLinkClick(i.target,i.detail.url,i.detail.originalEvent)&&(this.clickEvent.preventDefault(),i.preventDefault(),this.delegate.linkClickIntercepted(i.target,i.detail.url,i.detail.originalEvent)),delete this.clickEvent},this.willVisit=i=>{delete this.clickEvent},this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},Ve=class{constructor(e,t){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=i=>{if(i instanceof MouseEvent&&this.clickEventIsSignificant(i)){let r=i.composedPath&&i.composedPath()[0]||i.target,n=this.findLinkFromClickTarget(r);if(n&&zi(n)){let o=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,o,i)&&(i.preventDefault(),this.delegate.followedLinkToLocation(n,o))}}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}findLinkFromClickTarget(e){return Ne(e,"a[href]:not([target^=_]):not([download])")}getLocationForLink(e){return S(e.getAttribute("href")||"")}};function zi(s){if(s.hasAttribute("target")){for(let e of document.getElementsByName(s.target))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}var qe=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new Ve(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&e.hasAttribute("data-turbo-method")}followedLinkToLocation(e,t){let i=document.createElement("form"),r="hidden";for(let[m,u]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:r,name:m,value:u}));let n=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",n.href),i.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let l=_e(e);l&&i.setAttribute("data-turbo-action",l);let h=e.getAttribute("data-turbo-confirm");h&&i.setAttribute("data-turbo-confirm",h),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},je=class{static preservingPermanentElements(e,t,i){return c(this,null,function*(){let r=new this(e,t);r.enter(),yield i(),r.leave()})}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=Gi(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){let t=this.getPlaceholderById(e.id);t==null||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function Gi(s){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var ue=class{constructor(e,t,i,r,n=!0){this.activeElement=null,this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=r,this.willRender=n,this.renderElement=i,this.promise=new Promise((o,a)=>this.resolvingFunctions={resolve:o,reject:a})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}preservingPermanentElements(e){return c(this,null,function*(){yield je.preservingPermanentElements(this,this.permanentElementMap,e)})}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;Ji(e)&&e.focus()}enteringBardo(e){this.activeElement||e.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}};function Ji(s){return s&&typeof s.focus=="function"}var de=class extends ue{static renderElement(e,t){var i;let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let n=t,o=(i=n.ownerDocument)===null||i===void 0?void 0:i.createRange();o&&(o.selectNodeContents(n),e.appendChild(o.extractContents()))}constructor(e,t,i,r,n,o=!0){super(t,i,r,n,o),this.delegate=e}get shouldRender(){return!0}render(){return c(this,null,function*(){yield xe(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),yield xe(),this.focusFirstAutofocusableElement(),yield xe(),this.activateScriptElements()})}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=Qi(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Xi(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=ce(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Qi(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function Xi(s,e){return s=="auto"||s=="smooth"?s:e}var F=class{static get defaultCSS(){return Rs`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${F.animationDuration}ms ease-out,
          opacity ${F.animationDuration/2}ms ${F.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,F.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,F.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=F.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Be("csp-nonce")}};F.animationDuration=300;var dt=class extends se{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(e=>!tr(e)).map(e=>rr(e)).reduce((e,t)=>{let{outerHTML:i}=t,r=i in e?e[i]:{type:Yi(t),tracked:Zi(t),elements:[]};return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{elements:[...r.elements,t]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:r,elements:n}=this.detailsByOuterHTML[t];return i==null&&!r?[...e,...n]:n.length>1?[...e,...n.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[r]}=this.detailsByOuterHTML[i];return ir(r,e)?r:t},void 0)}};function Yi(s){if(er(s))return"script";if(sr(s))return"stylesheet"}function Zi(s){return s.getAttribute("data-turbo-track")=="reload"}function er(s){return s.localName=="script"}function tr(s){return s.localName=="noscript"}function sr(s){let e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function ir(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function rr(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var C=class extends se{static fromHTMLString(e=""){return this.fromDocument(Fs(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({head:e,body:t}){return new this(t,new dt(e))}constructor(e,t){super(e),this.headSnapshot=t}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[r,n]of t.entries()){let o=i[r];for(let a of o.selectedOptions)a.selected=!1;for(let a of n.selectedOptions)o.options[a.index].selected=!0}for(let r of e.querySelectorAll('input[type="password"]'))r.value="";return new C(e,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var e;let t=(e=this.getSetting("root"))!==null&&e!==void 0?e:"/";return S(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},Z;(function(s){s.visitStart="visitStart",s.requestStart="requestStart",s.requestEnd="requestEnd",s.visitEnd="visitEnd"})(Z||(Z={}));var M;(function(s){s.initialized="initialized",s.started="started",s.canceled="canceled",s.failed="failed",s.completed="completed"})(M||(M={}));var nr={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},H;(function(s){s[s.networkFailure=0]="networkFailure",s[s.timeoutFailure=-1]="timeoutFailure",s[s.contentTypeMismatch=-2]="contentTypeMismatch"})(H||(H={}));var mt=class{constructor(e,t,i,r={}){this.identifier=te(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=M.initialized,this.delegate=e,this.location=t,this.restorationIdentifier=i||te();let{action:n,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:h,response:y,visitCachedSnapshot:m,willRender:u,updateHistory:L,shouldCacheSnapshot:b,acceptsStreamResponse:O}=Object.assign(Object.assign({},nr),r);this.action=n,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=h,this.response=y,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=m,this.willRender=u,this.updateHistory=L,this.scrolled=!u,this.shouldCacheSnapshot=b,this.acceptsStreamResponse=O}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==M.initialized&&(this.recordTimingMetric(Z.visitStart),this.state=M.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==M.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=M.canceled)}complete(){this.state==M.started&&(this.recordTimingMetric(Z.visitEnd),this.state=M.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==M.started&&(this.state=M.failed,this.adapter.visitFailed(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){let t=this.location.href===((e=this.referrer)===null||e===void 0?void 0:e.href)?"replace":this.action,i=Ps(t);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new le(this,A.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Z.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;Cs(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Z.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(()=>c(this,null,function*(){this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&(yield this.view.renderPromise),Cs(e)&&t!=null?(yield this.view.renderPage(C.fromHTMLString(t),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(yield this.view.renderError(C.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!G(this.location)||e.hasAnchor(G(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return C.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(()=>c(this,null,function*(){this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&(yield this.view.renderPromise),yield this.view.renderPage(e,t,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),t||this.complete())}))}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&((e=this.response)===null||e===void 0?void 0:e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(()=>c(this,null,function*(){this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(N.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}requestSucceededWithResponse(e,t){return c(this,null,function*(){let i=yield t.responseHTML,{redirected:r,statusCode:n}=t;i==null?this.recordResponse({statusCode:H.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:i,redirected:r}))})}requestFailedWithResponse(e,t){return c(this,null,function*(){let i=yield t.responseHTML,{redirected:r,statusCode:n}=t;i==null?this.recordResponse({statusCode:H.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:n,responseHTML:i,redirected:r})})}requestErrored(e,t){this.recordResponse({statusCode:H.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=G(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}render(e){return c(this,null,function*(){this.cancelRender(),yield new Promise(t=>{this.frame=requestAnimationFrame(()=>t())}),yield e(),delete this.frame})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Cs(s){return s>=200&&s<300}var ft=class{constructor(e){this.progressBar=new F,this.showProgressBar=()=>{this.progressBar.show()},this.session=e}visitProposedToLocation(e,t){this.navigator.startVisit(e,(t==null?void 0:t.restorationIdentifier)||te(),t)}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case H.networkFailure:case H.timeoutFailure:case H.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(e){}pageInvalidated(e){this.reload(e)}visitFailed(e){}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;E("turbo:reload",{detail:e}),window.location.href=((t=this.location)===null||t===void 0?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}},pt=class{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},gt=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new $e(this,t),this.formSubmitObserver=new he(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.shouldRedirect(e)}linkClickIntercepted(e,t,i){let r=this.findFrameElement(e);r&&r.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.shouldSubmit(e,t)&&this.shouldRedirect(e,t)}formSubmitted(e,t){let i=this.findFrameElement(e,t);i&&i.delegate.formSubmitted(e,t)}shouldSubmit(e,t){var i;let r=Rt(e,t),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=S((i=n==null?void 0:n.content)!==null&&i!==void 0?i:"/");return this.shouldRedirect(e,t)&&ee(r,o)}shouldRedirect(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let r=this.findFrameElement(e,t);return r?r!=e.closest("turbo-frame"):!1}else return!1}findFrameElement(e,t){let i=(t==null?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let r=this.element.querySelector(`#${i}:not([disabled])`);if(r instanceof R)return r}}},vt=class{constructor(e){this.restorationIdentifier=te(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){let{turbo:i}=t.state||{};if(i){this.location=new URL(window.location.href);let{restorationIdentifier:r}=i;this.restorationIdentifier=r,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,r)}}},this.onPageLoad=t=>c(this,null,function*(){yield Pi(),this.pageLoaded=!0}),this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=te()){let r={turbo:{restorationIdentifier:i}};e.call(history,r,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]=Object.assign(Object.assign({},i),e)}assumeControlOfScrollRestoration(){var e;this.previousScrollRestoration||(this.previousScrollRestoration=(e=history.scrollRestoration)!==null&&e!==void 0?e:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},bt=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&(ee(e,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(e,t):window.location.href=e.toString())}startVisit(e,t,i={}){this.stop(),this.currentVisit=new mt(this,S(e),t,Object.assign({referrer:this.location},i)),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new J(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}formSubmissionSucceededWithResponse(e,t){return c(this,null,function*(){if(e==this.formSubmission){let i=yield t.responseHTML;if(i){let r=e.isSafe;r||this.view.clearSnapshotCache();let{statusCode:n,redirected:o}=t,l={action:this.getActionForFormSubmission(e),shouldCacheSnapshot:r,response:{statusCode:n,responseHTML:i,redirected:o}};this.proposeVisit(t.location,l)}}})}formSubmissionFailedWithResponse(e,t){return c(this,null,function*(){let i=yield t.responseHTML;if(i){let r=C.fromHTMLString(i);t.serverError?yield this.view.renderError(r,this.currentVisit):yield this.view.renderPage(r,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}})}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let i=G(e),r=G(this.view.lastRenderedLocation),n=t==="restore"&&typeof i=="undefined";return t!=="replace"&&at(e)===at(this.view.lastRenderedLocation)&&(n||i!=null&&i!==r)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:e,formElement:t}){return _e(e,t)||"advance"}},B;(function(s){s[s.initial=0]="initial",s[s.loading=1]="loading",s[s.interactive=2]="interactive",s[s.complete=3]="complete"})(B||(B={}));var yt=class{constructor(e){this.stage=B.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=e}start(){this.started||(this.stage==B.initial&&(this.stage=B.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==B.loading&&(this.stage=B.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==B.interactive&&(this.stage=B.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},Et=class{constructor(e){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}},wt=class{render({fragment:e}){je.preservingPermanentElements(this,or(e),()=>document.documentElement.appendChild(e))}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function or(s){let e=Bs(document.documentElement),t={};for(let i of e){let{id:r}=i;for(let n of s.querySelectorAll("turbo-stream")){let o=Is(n.templateElement.content,r);o&&(t[r]=[i,o])}}return t}var St=class{constructor(e){this.sources=new Set,this.started=!1,this.inspectFetchResponse=t=>{let i=ar(t);i&&cr(i)&&(t.preventDefault(),this.receiveMessageResponse(i))},this.receiveMessageEvent=t=>{this.started&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)},this.delegate=e}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}receiveMessageResponse(e){return c(this,null,function*(){let t=yield e.responseHTML;t&&this.receiveMessageHTML(t)})}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(N.wrap(e))}};function ar(s){var e;let t=(e=s.detail)===null||e===void 0?void 0:e.fetchResponse;if(t instanceof ae)return t}function cr(s){var e;return((e=s.contentType)!==null&&e!==void 0?e:"").startsWith(N.contentType)}var He=class extends ue{static renderElement(e,t){let{documentElement:i,body:r}=document;i.replaceChild(t,r)}render(){return c(this,null,function*(){this.replaceHeadAndBody(),this.activateScriptElements()})}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=ce(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},me=class extends ue{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}prepareToRender(){return c(this,null,function*(){yield this.mergeHead()})}render(){return c(this,null,function*(){this.willRender&&(yield this.replaceBody())})}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){return c(this,null,function*(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),yield e,yield t})}replaceBody(){return c(this,null,function*(){yield this.preservingPermanentElements(()=>c(this,null,function*(){this.activateNewBody(),yield this.assignNewBody()}))})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){return c(this,null,function*(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(Bi(t)),document.head.appendChild(t);yield Promise.all(e)})}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(ce(e))}mergeProvisionalElements(){return c(this,null,function*(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)})}isCurrentElementInElementList(e,t){for(let[i,r]of t.entries()){if(e.tagName=="TITLE"){if(r.tagName!="TITLE")continue;if(e.innerHTML==r.innerHTML)return t.splice(i,1),!0}if(r.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=ce(e);e.replaceWith(t)}}assignNewBody(){return c(this,null,function*(){yield this.renderElement(this.currentElement,this.newElement)})}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},At=class{constructor(e){this.keys=[],this.snapshots={},this.size=e}has(e){return Pe(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Pe(e)]}write(e,t){this.snapshots[Pe(e)]=t}touch(e){let t=Pe(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Tt=class extends De{constructor(){super(...arguments),this.snapshotCache=new At(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(e,t=!1,i=!0,r){let n=new me(this.snapshot,e,me.renderElement,t,i);return n.shouldRender?r==null||r.changeHistory():this.forceReloaded=!0,this.render(n)}renderError(e,t){t==null||t.changeHistory();let i=new He(this.snapshot,e,He.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}cacheSnapshot(){return c(this,arguments,function*(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;yield Ri();let i=e.clone();return this.snapshotCache.put(t,i),i}})}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}get snapshot(){return C.fromElement(this.element)}},Ct=class{constructor(e){this.selector="a[data-turbo-preload]",this.delegate=e}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.preloadURL(t)}preloadURL(e){return c(this,null,function*(){let t=new URL(e.href);if(!this.snapshotCache.has(t))try{let r=yield(yield fetch(t.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),n=C.fromHTMLString(r);this.snapshotCache.put(t,n)}catch(i){}})}},Lt=class{constructor(){this.navigator=new bt(this),this.history=new vt(this),this.preloader=new Ct(this),this.view=new Tt(this,document.documentElement),this.adapter=new ft(this),this.pageObserver=new yt(this),this.cacheObserver=new pt,this.linkClickObserver=new Ve(this,window),this.formSubmitObserver=new he(this,document),this.scrollObserver=new Et(this),this.streamObserver=new St(this),this.formLinkClickObserver=new qe(this,document.documentElement),this.frameRedirector=new gt(this,document.documentElement),this.streamMessageRenderer=new wt,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;i instanceof R?(i.src=e.toString(),i.loaded):this.navigator.proposeVisit(S(e),t)}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(N.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(e,t){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&ee(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&ee(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),r=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Ls(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||ct(document.documentElement),Ls(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){lt(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=Rt(e,t);return this.submissionIsNavigatable(e,t)&&ee(S(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;!((e=this.navigator.currentVisit)===null||e===void 0)&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:r,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!r}viewRenderedSnapshot(e,t){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return E("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return E("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return E("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return E("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return E("turbo:before-render",{detail:Object.assign({newBody:e},t),cancelable:!0})}notifyApplicationAfterRender(){return E("turbo:render")}notifyApplicationAfterPageLoad(e={}){return E("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return E("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return E("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Ne(e,"[data-turbo]"),i=Ne(e,"turbo-frame");return this.drive||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return _e(e)||"advance"}get snapshot(){return this.view.snapshot}};function Ls(s){Object.defineProperties(s,lr)}var lr={absoluteURL:{get(){return this.toString()}}},Ot=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(e){Di("turbo-cache-control",e)}},Ns={after(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,s.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,s)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){this.targetElements.forEach(s=>s.replaceWith(this.templateContent))},update(){this.targetElements.forEach(s=>{s.innerHTML="",s.append(this.templateContent)})}},g=new Lt,hr=new Ot(g),{navigator:ur}=g;function Ds(){g.start()}function dr(s){g.registerAdapter(s)}function mr(s,e){g.visit(s,e)}function Ke(s){g.connectStreamSource(s)}function We(s){g.disconnectStreamSource(s)}function fr(s){g.renderStreamMessage(s)}function pr(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),g.clearCache()}function gr(s){g.setProgressBarDelay(s)}function vr(s){J.confirmMethod=s}function br(s){g.setFormMode(s)}var yr=Object.freeze({__proto__:null,navigator:ur,session:g,cache:hr,PageRenderer:me,PageSnapshot:C,FrameRenderer:de,start:Ds,registerAdapter:dr,visit:mr,connectStreamSource:Ke,disconnectStreamSource:We,renderStreamMessage:fr,clearCache:pr,setProgressBarDelay:gr,setConfirmMethod:vr,setFormMode:br,StreamActions:Ns}),kt=class extends Error{},Mt=class{constructor(e){this.fetchResponseLoaded=t=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:t})=>{let i=t.querySelector("#"+this.element.id);i&&this.previousFrameElement&&i.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=e,this.view=new ut(this,this.element),this.appearanceObserver=new ht(this,this.element),this.formLinkClickObserver=new qe(this,this.element),this.linkInterceptor=new $e(this,this.element),this.restorationIdentifier=te(),this.formSubmitObserver=new he(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==j.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==j.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==j.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){let{src:e}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=e,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==j.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}loadSourceURL(){return c(this,null,function*(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(S(this.sourceURL)),this.appearanceObserver.stop(),yield this.element.loaded,this.hasBeenLoaded=!0)})}loadResponse(e){return c(this,null,function*(){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=yield e.responseHTML;if(t){let i=Fs(t);C.fromDocument(i).isVisitable?yield this.loadFrameResponse(e,i):yield this.handleUnvisitableFrameResponse(e)}}finally{this.fetchResponseLoaded=()=>{}}})}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,e),this.loadSourceURL()}willSubmitFormLinkToLocation(e){return this.shouldInterceptNavigation(e)}submittedFormLinkToLocation(e,t,i){let r=this.findFrameElement(e);r&&i.setAttribute("data-turbo-frame",r.id)}shouldInterceptLinkClick(e,t,i){return this.shouldInterceptNavigation(e)}linkClickIntercepted(e,t){this.navigateFrame(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new J(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,!((t=this.currentNavigationElement)===null||t===void 0)&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(N.contentType)}requestStarted(e){ct(this.element)}requestPreventedHandlingResponse(e,t){this.resolveVisitPromise()}requestSucceededWithResponse(e,t){return c(this,null,function*(){yield this.loadResponse(t),this.resolveVisitPromise()})}requestFailedWithResponse(e,t){return c(this,null,function*(){yield this.loadResponse(t),this.resolveVisitPromise()})}requestErrored(e,t){console.error(t),this.resolveVisitPromise()}requestFinished(e){lt(this.element)}formSubmissionStarted({formElement:e}){ct(e,this.findFrameElement(e))}formSubmissionSucceededWithResponse(e,t){let i=this.findFrameElement(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,e.formElement,e.submitter),i.delegate.loadResponse(t),e.isSafe||g.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),g.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){lt(e,this.findFrameElement(e))}allowsImmediateRender({element:e},t){let i=E("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:e},t),cancelable:!0}),{defaultPrevented:r,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!r}viewRenderedSnapshot(e,t){}preloadOnLoadLinksForView(e){g.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}loadFrameResponse(e,t){return c(this,null,function*(){let i=yield this.extractForeignFrameElement(t.body);if(i){let r=new se(i),n=new de(this,this.view.snapshot,r,de.renderElement,!1,!1);this.view.renderPromise&&(yield this.view.renderPromise),this.changeHistory(),yield this.view.render(n),this.complete=!0,g.frameRendered(e,this.element),g.frameLoaded(this.element),this.fetchResponseLoaded(e)}else this.willHandleFrameMissingFromResponse(e)&&this.handleFrameMissingFromResponse(e)})}visit(e){return c(this,null,function*(){var t;let i=new le(this,A.get,e,new URLSearchParams,this.element);return(t=this.currentFetchRequest)===null||t===void 0||t.cancel(),this.currentFetchRequest=i,new Promise(r=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,r()},i.perform()})})}navigateFrame(e,t,i){let r=this.findFrameElement(e,i);r.delegate.proposeVisitIfNavigatedWithAction(r,e,i),this.withCurrentNavigationElement(e,()=>{r.src=t})}proposeVisitIfNavigatedWithAction(e,t,i){if(this.action=_e(i,t,e),this.action){let r=C.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=o=>{if(e.src){let{statusCode:a,redirected:l}=o,h=e.ownerDocument.documentElement.outerHTML,m={response:{statusCode:a,redirected:l,responseHTML:h},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(m.action=this.action),g.visit(e.src,m)}}}}changeHistory(){if(this.action){let e=Ps(this.action);g.history.update(e,S(this.element.src||""),this.restorationIdentifier)}}handleUnvisitableFrameResponse(e){return c(this,null,function*(){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),yield this.visitResponse(e.response)})}willHandleFrameMissingFromResponse(e){this.element.setAttribute("complete","");let t=e.response,i=(a,...l)=>c(this,[a,...l],function*(n,o={}){n instanceof Response?this.visitResponse(n):g.visit(n,o)});return!E("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(e){this.view.missing(),this.throwFrameMissingError(e)}throwFrameMissingError(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new kt(t)}visitResponse(e){return c(this,null,function*(){let t=new ae(e),i=yield t.responseHTML,{location:r,redirected:n,statusCode:o}=t;return g.visit(r,{response:{redirected:n,statusCode:o,responseHTML:i}})})}findFrameElement(e,t){var i;let r=Ie("data-turbo-frame",t,e)||this.element.getAttribute("target");return(i=Os(r))!==null&&i!==void 0?i:this.element}extractForeignFrameElement(e){return c(this,null,function*(){let t,i=CSS.escape(this.id);try{if(t=ks(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=ks(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return yield t.loaded,yield this.extractForeignFrameElement(t)}catch(r){return console.error(r),new R}return null})}formActionIsVisitable(e,t){let i=Rt(e,t);return ee(S(i),this.rootLocation)}shouldInterceptNavigation(e,t){let i=Ie("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.formActionIsVisitable(e,t)||!this.enabled||i=="_top")return!1;if(i){let r=Os(i);if(r)return!r.disabled}return!(!g.elementIsNavigatable(e)||t&&!g.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.ignoringChangesToAttribute("src",()=>{this.element.src=e!=null?e:null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){this.ignoringChangesToAttribute("complete",()=>{e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var e;let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=(e=t==null?void 0:t.content)!==null&&e!==void 0?e:"/";return S(i)}isIgnoringChangesTo(e){return this.ignoredAttributes.has(e)}ignoringChangesToAttribute(e,t){this.ignoredAttributes.add(e),t(),this.ignoredAttributes.delete(e)}withCurrentNavigationElement(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function Os(s){if(s!=null){let e=document.getElementById(s);if(e instanceof R)return e}}function ks(s,e){if(s){let t=s.getAttribute("src");if(t!=null&&e!=null&&Ti(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof R)return s.connectedCallback(),s.disconnectedCallback(),s}}var fe=class extends HTMLElement{static renderElement(e){return c(this,null,function*(){yield e.performAction()})}connectedCallback(){return c(this,null,function*(){try{yield this.render()}catch(e){console.error(e)}finally{this.disconnect()}})}render(){return c(this,null,function*(){var e;return(e=this.renderPromise)!==null&&e!==void 0?e:this.renderPromise=(()=>c(this,null,function*(){let t=this.beforeRenderEvent;this.dispatchEvent(t)&&(yield xe(),yield t.detail.render(this))}))()})}disconnect(){try{this.remove()}catch(e){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){var e;let t=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),i=[...((e=this.templateContent)===null||e===void 0?void 0:e.children)||[]].filter(r=>!!r.id).map(r=>r.id);return t.filter(r=>i.includes(r.id))}get performAction(){if(this.action){let e=Ns[this.action];if(e)return e;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(e){throw new Error(`${this.description}: ${e}`)}get description(){var e,t;return(t=((e=this.outerHTML.match(/<[^>]+>/))!==null&&e!==void 0?e:[])[0])!==null&&t!==void 0?t:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:fe.renderElement}})}get targetElementsById(){var e;let t=(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var e;let t=(e=this.ownerDocument)===null||e===void 0?void 0:e.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}},Ft=class extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Ke(this.streamSource)}disconnectedCallback(){this.streamSource&&We(this.streamSource)}get src(){return this.getAttribute("src")||""}};R.delegateConstructor=Mt;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",R);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",fe);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Ft);(()=>{let s=document.currentScript;if(!!s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(Rs`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo=yr;Ds();var Ks;function Tr(){return c(this,null,function*(){return Ks||_s(Cr().then(_s))})}function _s(s){return Ks=s}function Cr(){return c(this,null,function*(){let{createConsumer:s}=yield Promise.resolve().then(()=>(Hs(),js));return s()})}function Ws(s,e){return c(this,null,function*(){let{subscriptions:t}=yield Tr();return t.create(s,e)})}function Ee(s){return!s||typeof s!="object"||s instanceof Date||s instanceof RegExp?s:Array.isArray(s)?s.map(Ee):Object.keys(s).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(r,n){return"_"+n.toLowerCase()});return e[i]=Ee(s[t]),e},{})}var qt=class extends HTMLElement{connectedCallback(){return c(this,null,function*(){Ke(this),this.subscription=yield Ws(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})})}disconnectedCallback(){We(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return ot({channel:e,signed_stream_name:t},Ee(ot({},this.dataset)))}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",qt);function Us(s){if(s.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=s;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let r=Mr(t.body)?t.body:new URLSearchParams,n=Or(i,r,e);/get/i.test(n)||(/post/i.test(n)?r.delete("_method"):r.set("_method",n),t.method="post")},{once:!0})}}function Or(s,e,t){let i=kr(s),r=e.get("_method"),n=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof r=="string"?r:n}function kr(s){return(s instanceof HTMLButtonElement||s instanceof HTMLInputElement)&&s.hasAttribute("formmethod")?s.formMethod:null}function Mr(s){return s instanceof FormData||s instanceof URLSearchParams}addEventListener("turbo:before-fetch-request",Us);var jt=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Fr(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,r=t.index;return i<r?-1:i>r?1:0})}};function Fr(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var Ht=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:i,eventOptions:r}=e,n=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,r);n.delete(o),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:r}=e;return this.fetchEventListener(t,i,r)}fetchEventListener(e,t,i){let r=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,i),o=r.get(n);return o||(o=this.createEventListener(e,t,i),r.set(n,o)),o}createEventListener(e,t,i){let r=new jt(e,t,i);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(r=>{i.push(`${t[r]?"":"!"}${r}`)}),i.join(":")}},Rr={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},Pr=/^(?:(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function xr(s){let t=s.trim().match(Pr)||[],i=t[1],r=t[2];return r&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${r}`,r=""),{eventTarget:Ir(t[3]),eventName:i,eventOptions:t[6]?Br(t[6]):{},identifier:t[4],methodName:t[5],keyFilter:r}}function Ir(s){if(s=="window")return window;if(s=="document")return document}function Br(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Nr(s){if(s==window)return"window";if(s==document)return"document"}function ls(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function _t(s){return ls(s.replace(/--/g,"-").replace(/__/g,"_"))}function Ae(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Xs(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Dr(s){return s.match(/[^\s]+/g)||[]}var Kt=class{constructor(e,t,i,r){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||$r(e)||Ye("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Ye("missing identifier"),this.methodName=i.methodName||Ye("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,xr(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}isFilterTarget(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+"),i=["meta","ctrl","alt","shift"],[r,n,o,a]=i.map(h=>t.includes(h));if(e.metaKey!==r||e.ctrlKey!==n||e.altKey!==o||e.shiftKey!==a)return!0;let l=t.filter(h=>!i.includes(h))[0];return l?(Object.prototype.hasOwnProperty.call(this.keyMappings,l)||Ye(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[l].toLowerCase()!==e.key.toLowerCase()):!1}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:r}of Array.from(this.element.attributes)){let n=i.match(t),o=n&&n[1];o&&(e[ls(o)]=Vr(r))}return e}get eventTargetName(){return Nr(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}},zs={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function $r(s){let e=s.tagName.toLowerCase();if(e in zs)return zs[e](s)}function Ye(s){throw new Error(s)}function Vr(s){try{return JSON.parse(s)}catch(e){return s}}var Wt=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){this.willBeInvokedByEvent(e)&&this.applyEventModifiers(e)&&this.invokeWithEvent(e)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,r=!0;for(let[n,o]of Object.entries(this.eventOptions))if(n in i){let a=i[n];r=r&&a({name:n,value:o,event:e,element:t})}else continue;return r}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{let{params:r}=this.action,n=Object.assign(e,{params:r});this.method.call(this.controller,n),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(r){let{identifier:n,controller:o,element:a,index:l}=this,h={identifier:n,controller:o,element:a,index:l,event:e};this.context.handleError(r,`invoking action "${this.action}"`,h)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.isFilterTarget(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Ze=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){let i=e;this.elements.has(i)?this.delegate.elementAttributeChanged&&this.matchElement(i)?this.delegate.elementAttributeChanged(i,t):this.removeElement(i):this.matchElement(i)&&this.addElement(i)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Ut=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new Ze(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function qr(s,e,t){Ys(s,e).add(t)}function jr(s,e,t){Ys(s,e).delete(t),Hr(s,e)}function Ys(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Hr(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var D=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){qr(this.valuesByKey,e,t)}delete(e,t){jr(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var zt=class{constructor(e,t,i,r={}){this.selector=t,this.details=r,this.elementObserver=new Ze(e,this),this.delegate=i,this.matchesByElement=new D}get started(){return this.elementObserver.started}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let t=e.matches(this.selector);return this.delegate.selectorMatchElement?t&&this.delegate.selectorMatchElement(e,this.details):t}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector)).filter(r=>this.matchElement(r));return t.concat(i)}elementMatched(e){this.selectorMatched(e)}elementUnmatched(e){this.selectorUnmatched(e)}elementAttributeChanged(e,t){let i=this.matchElement(e),r=this.matchesByElement.has(this.selector,e);!i&&r&&this.selectorUnmatched(e)}selectorMatched(e){this.delegate.selectorMatched&&(this.delegate.selectorMatched(e,this.selector,this.details),this.matchesByElement.add(this.selector,e))}selectorUnmatched(e){this.delegate.selectorUnmatched(e,this.selector,this.details),this.matchesByElement.delete(this.selector,e)}},Gt=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,i,t),r==null){let n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(i,e,n)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},et=class{constructor(e,t,i){this.attributeObserver=new Ut(e,t,this),this.delegate=i,this.tokensByElement=new D}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),r=Kr(t,i).findIndex(([n,o])=>!Wr(n,o));return r==-1?[[],[]]:[t.slice(r),i.slice(r)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return _r(i,e,t)}};function _r(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,r)=>({element:e,attributeName:t,content:i,index:r}))}function Kr(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(i,r)=>[s[r],e[r]])}function Wr(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var tt=class{constructor(e,t,i){this.tokenListObserver=new et(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},Jt=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new tt(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Wt(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Kt.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Qt=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Gt(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let r=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),i):this.invokeChangedCallback(e,r.writer(r.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:r}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(i),void 0)}invokeChangedCallback(e,t,i){let r=`${e}Changed`,n=this.receiver[r];if(typeof n=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=i;i&&(l=o.reader(i)),n.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${Ae(t.name)}`;return this.receiver[i]}},Xt=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new D}start(){this.tokenListObserver||(this.tokenListObserver=new et(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Te(s,e){let t=Zs(s);return Array.from(t.reduce((i,r)=>(zr(r,e).forEach(n=>i.add(n)),i),new Set))}function Ur(s,e){return Zs(s).reduce((i,r)=>(i.push(...Gr(r,e)),i),[])}function Zs(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function zr(s,e){let t=s[e];return Array.isArray(t)?t:[]}function Gr(s,e){let t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}var Yt=class{constructor(e,t){this.context=e,this.delegate=t,this.outletsByName=new D,this.outletElementsByName=new D,this.selectorObserverMap=new Map}start(){this.selectorObserverMap.size===0&&(this.outletDefinitions.forEach(e=>{let t=this.selector(e),i={outletName:e};t&&this.selectorObserverMap.set(e,new zt(document.body,t,this,i))}),this.selectorObserverMap.forEach(e=>e.start())),this.dependentContexts.forEach(e=>e.refresh())}stop(){this.selectorObserverMap.size>0&&(this.disconnectAllOutlets(),this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}refresh(){this.selectorObserverMap.forEach(e=>e.refresh())}selectorMatched(e,t,{outletName:i}){let r=this.getOutlet(e,i);r&&this.connectOutlet(r,e,i)}selectorUnmatched(e,t,{outletName:i}){let r=this.getOutletFromMap(e,i);r&&this.disconnectOutlet(r,e,i)}selectorMatchElement(e,{outletName:t}){return this.hasOutlet(e,t)&&e.matches(`[${this.context.application.schema.controllerAttribute}~=${t}]`)}connectOutlet(e,t,i){var r;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(r=this.selectorObserverMap.get(i))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var r;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(r=this.selectorObserverMap.get(i))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}get outletDependencies(){let e=new D;return this.router.modules.forEach(t=>{let i=t.definition.controllerConstructor;Te(i,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Zt=class{constructor(e,t){this.logDebugActivity=(i,r={})=>{let{identifier:n,controller:o,element:a}=this;r=Object.assign({identifier:n,controller:o,element:a},r),this.application.logDebugActivity(this.identifier,i,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Jt(this,this.dispatcher),this.valueObserver=new Qt(this,this.controller),this.targetObserver=new Xt(this,this),this.outletObserver=new Yt(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:r,controller:n,element:o}=this;i=Object.assign({identifier:r,controller:n,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${_t(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${_t(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function Jr(s){return Qr(s,Xr(s))}function Qr(s,e){let t=tn(s),i=Yr(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function Xr(s){return Te(s,"blessings").reduce((t,i)=>{let r=i(s);for(let n in r){let o=t[n]||{};t[n]=Object.assign(o,r[n])}return t},{})}function Yr(s,e){return en(e).reduce((t,i)=>{let r=Zr(s,e,i);return r&&Object.assign(t,{[i]:r}),t},{})}function Zr(s,e,t){let i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){let n=Object.getOwnPropertyDescriptor(e,t).value;return i&&(n.get=i.get||n.get,n.set=i.set||n.set),n}}var en=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),tn=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch(t){return i=>class extends i{}}})();function sn(s){return{identifier:s.identifier,controllerConstructor:Jr(s.controllerConstructor)}}var es=class{constructor(e,t){this.application=e,this.definition=sn(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Zt(this,e),this.contextsByScope.set(e,t)),t}},ts=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Dr(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},ss=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${Xs(e)}`}},is=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(i,e))}};function rs(s,e){return`[${s}~="${e}"]`}var ns=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return rs(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return rs(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,r=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${i}.${t}" with ${n}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},os=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,i){let r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(i)}},we=class{constructor(e,t,i,r){this.targets=new ns(this),this.classes=new ts(this),this.data=new ss(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new is(r),this.outlets=new os(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return rs(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new we(this.schema,document.documentElement,this.identifier,this.guide.logger)}},as=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new tt(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e,r=this.fetchScopesByIdentifierForElement(t),n=r.get(i);return n||(n=this.delegate.createScopeForElementAndIdentifier(t,i),r.set(i,n)),n}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},cs=class{constructor(e){this.application=e,this.scopeObserver=new as(this.element,this.schema,this),this.scopesByIdentifier=new D,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new es(this.application,e);this.connectModule(t);let i=e.controllerConstructor.afterLoad;i&&i(e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(r=>r.element==e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new we(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},rn={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},Gs("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Gs("0123456789".split("").map(s=>[s,s])))};function Gs(s){return s.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}var st=class{constructor(e=document.documentElement,t=rn){this.logger=console,this.debug=!1,this.logDebugActivity=(i,r,n={})=>{this.debug&&this.logFormattedMessage(i,r,n)},this.element=e,this.schema=t,this.dispatcher=new Ht(this),this.router=new cs(this),this.actionDescriptorFilters=Object.assign({},Rr)}static start(e,t){let i=new this(e,t);return i.start(),i}start(){return c(this,null,function*(){yield nn(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")})}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var r;this.logger.error(`%s

%o

%o`,t,e,i),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function nn(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function on(s){return Te(s,"classes").reduce((t,i)=>Object.assign(t,an(i)),{})}function an(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${Ae(s)}Class`]:{get(){return this.classes.has(s)}}}}function cn(s){return Te(s,"outlets").reduce((t,i)=>Object.assign(t,ln(i)),{})}function ln(s){let e=_t(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s);if(t){let i=this.application.getControllerForElementAndIdentifier(t,s);if(i)return i;throw new Error(`Missing "data-controller=${s}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${s}" for "${this.identifier}" controller`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(i=>{let r=this.application.getControllerForElementAndIdentifier(i,s);if(r)return r;console.warn(`The provided outlet element is missing the outlet controller "${s}" for "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for "${this.identifier}" controller`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${Ae(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function hn(s){return Te(s,"targets").reduce((t,i)=>Object.assign(t,un(i)),{})}function un(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${Ae(s)}Target`]:{get(){return this.targets.has(s)}}}}function dn(s){let e=Ur(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,r)=>{let n=ei(r,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(i,{[o]:n})},{})}}};return e.reduce((i,r)=>Object.assign(i,mn(r)),t)}function mn(s,e){let t=ei(s,e),{key:i,name:r,reader:n,writer:o}=t;return{[r]:{get(){let a=this.data.get(i);return a!==null?n(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${Ae(r)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function ei([s,e],t){return vn({controller:t,token:s,typeDefinition:e})}function hs(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Se(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function fn(s){let e=hs(s.typeObject.type);if(!e)return;let t=Se(s.typeObject.default);if(e!==t){let i=s.controller?`${s.controller}.${s.token}`:s.token;throw new Error(`The specified default value for the Stimulus Value "${i}" must match the defined type "${e}". The provided default value of "${s.typeObject.default}" is of type "${t}".`)}return e}function pn(s){let e=fn({controller:s.controller,token:s.token,typeObject:s.typeDefinition}),t=Se(s.typeDefinition),i=hs(s.typeDefinition),r=e||t||i;if(r)return r;let n=s.controller?`${s.controller}.${s.typeDefinition}`:s.token;throw new Error(`Unknown value type "${n}" for "${s.token}" value`)}function gn(s){let e=hs(s);if(e)return bn[e];let t=s.default;return t!==void 0?t:s}function vn(s){let e=`${Xs(s.token)}-value`,t=pn(s);return{type:t,key:e,name:ls(e),get defaultValue(){return gn(s.typeDefinition)},get hasCustomDefaultValue(){return Se(s.typeDefinition)!==void 0},reader:yn[t],writer:Js[t]||Js.default}}var bn={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},yn={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${Se(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s)},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${Se(e)}"`);return e},string(s){return s}},Js={default:En,array:Qs,object:Qs};function Qs(s){return JSON.stringify(s)}function En(s){return`${s}`}var P=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:r=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){let a=r?`${r}:${e}`:e,l=new CustomEvent(a,{detail:i,bubbles:n,cancelable:o});return t.dispatchEvent(l),l}};P.blessings=[on,hn,dn,cn];P.targets=[];P.outlets=[];P.values={};var Ce=st.start();Ce.warnings=!0;Ce.debug=!1;window.Stimulus=Ce;var us=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ds(s,e,t,i){s.addEventListener?s.addEventListener(e,t,i):s.attachEvent&&s.attachEvent("on".concat(e),function(){t(window.event)})}function ni(s,e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=s[t[i].toLowerCase()];return t}function oi(s){typeof s!="string"&&(s=""),s=s.replace(/\s/g,"");for(var e=s.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function wn(s,e){for(var t=s.length>=e.length?s:e,i=s.length>=e.length?e:s,r=!0,n=0;n<t.length;n++)i.indexOf(t[n])===-1&&(r=!1);return r}var Oe={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":us?173:189,"=":us?61:187,";":us?59:186,"'":222,"[":219,"]":221,"\\":220},I={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},ps={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},w={16:!1,18:!1,17:!1,91:!1},v={};for(Le=1;Le<20;Le++)Oe["f".concat(Le)]=111+Le;var Le,f=[],ti=!1,ai="all",ci=[],rt=function(e){return Oe[e.toLowerCase()]||I[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Sn=function(e){return Object.keys(Oe).find(function(t){return Oe[t]===e})},An=function(e){return Object.keys(I).find(function(t){return I[t]===e})};function li(s){ai=s||"all"}function ke(){return ai||"all"}function Tn(){return f.slice(0)}function Cn(){return f.map(function(s){return Sn(s)||An(s)||String.fromCharCode(s)})}function Ln(s){var e=s.target||s.srcElement,t=e.tagName,i=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(i=!1),i}function On(s){return typeof s=="string"&&(s=rt(s)),f.indexOf(s)!==-1}function kn(s,e){var t,i;s||(s=ke());for(var r in v)if(Object.prototype.hasOwnProperty.call(v,r))for(t=v[r],i=0;i<t.length;)t[i].scope===s?t.splice(i,1):i++;ke()===s&&li(e||"all")}function Mn(s){var e=s.keyCode||s.which||s.charCode,t=f.indexOf(e);if(t>=0&&f.splice(t,1),s.key&&s.key.toLowerCase()==="meta"&&f.splice(0,f.length),(e===93||e===224)&&(e=91),e in w){w[e]=!1;for(var i in I)I[i]===e&&($[i]=!1)}}function Fn(s){if(typeof s=="undefined")Object.keys(v).forEach(function(o){return delete v[o]});else if(Array.isArray(s))s.forEach(function(o){o.key&&ms(o)});else if(typeof s=="object")s.key&&ms(s);else if(typeof s=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=t[0],n=t[1];typeof r=="function"&&(n=r,r=""),ms({key:s,scope:r,method:n,splitKey:"+"})}}var ms=function(e){var t=e.key,i=e.scope,r=e.method,n=e.splitKey,o=n===void 0?"+":n,a=oi(t);a.forEach(function(l){var h=l.split(o),y=h.length,m=h[y-1],u=m==="*"?"*":rt(m);if(!!v[u]){i||(i=ke());var L=y>1?ni(I,h):[];v[u]=v[u].filter(function(b){var O=r?b.method===r:!0;return!(O&&b.scope===i&&wn(b.mods,L))})}})};function si(s,e,t,i){if(e.element===i){var r;if(e.scope===t||e.scope==="all"){r=e.mods.length>0;for(var n in w)Object.prototype.hasOwnProperty.call(w,n)&&(!w[n]&&e.mods.indexOf(+n)>-1||w[n]&&e.mods.indexOf(+n)===-1)&&(r=!1);(e.mods.length===0&&!w[16]&&!w[18]&&!w[17]&&!w[91]||r||e.shortcut==="*")&&e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0))}}}function ii(s,e){var t=v["*"],i=s.keyCode||s.which||s.charCode;if(!!$.filter.call(this,s)){if((i===93||i===224)&&(i=91),f.indexOf(i)===-1&&i!==229&&f.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(b){var O=ps[b];s[b]&&f.indexOf(O)===-1?f.push(O):!s[b]&&f.indexOf(O)>-1?f.splice(f.indexOf(O),1):b==="metaKey"&&s[b]&&f.length===3&&(s.ctrlKey||s.shiftKey||s.altKey||(f=f.slice(f.indexOf(O))))}),i in w){w[i]=!0;for(var r in I)I[r]===i&&($[r]=!0);if(!t)return}for(var n in w)Object.prototype.hasOwnProperty.call(w,n)&&(w[n]=s[ps[n]]);s.getModifierState&&!(s.altKey&&!s.ctrlKey)&&s.getModifierState("AltGraph")&&(f.indexOf(17)===-1&&f.push(17),f.indexOf(18)===-1&&f.push(18),w[17]=!0,w[18]=!0);var o=ke();if(t)for(var a=0;a<t.length;a++)t[a].scope===o&&(s.type==="keydown"&&t[a].keydown||s.type==="keyup"&&t[a].keyup)&&si(s,t[a],o,e);if(i in v){for(var l=0;l<v[i].length;l++)if((s.type==="keydown"&&v[i][l].keydown||s.type==="keyup"&&v[i][l].keyup)&&v[i][l].key){for(var h=v[i][l],y=h.splitKey,m=h.key.split(y),u=[],L=0;L<m.length;L++)u.push(rt(m[L]));u.sort().join("")===f.sort().join("")&&si(s,h,o,e)}}}}function Rn(s){return ci.indexOf(s)>-1}function $(s,e,t){f=[];var i=oi(s),r=[],n="all",o=document,a=0,l=!1,h=!0,y="+",m=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(n=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(h=e.keydown),e.capture!==void 0&&(m=e.capture),typeof e.splitKey=="string"&&(y=e.splitKey)),typeof e=="string"&&(n=e);a<i.length;a++)s=i[a].split(y),r=[],s.length>1&&(r=ni(I,s)),s=s[s.length-1],s=s==="*"?"*":rt(s),s in v||(v[s]=[]),v[s].push({keyup:l,keydown:h,scope:n,mods:r,shortcut:i[a],method:t,key:i[a],splitKey:y,element:o});typeof o!="undefined"&&!Rn(o)&&window&&(ci.push(o),ds(o,"keydown",function(u){ii(u,o)},m),ti||(ti=!0,ds(window,"focus",function(){f=[]},m)),ds(o,"keyup",function(u){ii(u,o),Mn(u)},m))}function Pn(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(v).forEach(function(t){var i=v[t].filter(function(r){return r.scope===e&&r.shortcut===s});i.forEach(function(r){r&&r.method&&r.method()})})}var fs={getPressedKeyString:Cn,setScope:li,getScope:ke,deleteScope:kn,getPressedKeyCodes:Tn,isPressed:On,filter:Ln,trigger:Pn,unbind:Fn,keyMap:Oe,modifier:I,modifierMap:ps};for(it in fs)Object.prototype.hasOwnProperty.call(fs,it)&&($[it]=fs[it]);var it;typeof window!="undefined"&&(ri=window.hotkeys,$.noConflict=function(s){return s&&window.hotkeys===$&&(window.hotkeys=ri),$},window.hotkeys=$);var ri;var xn=(s,e,t)=>{let i=s;return t===!0?i=`${e.identifier}:${s}`:typeof t=="string"&&(i=`${t}:${s}`),i},In=(s,e,t)=>{let{bubbles:i,cancelable:r,composed:n}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(t,{originalEvent:e}),new CustomEvent(s,{bubbles:i,cancelable:r,composed:n,detail:t})};function Bn(s){let e=s.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,r=e.top<=t&&e.top+e.height>0,n=e.left<=i&&e.left+e.width>0;return r&&n}var Nn={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},hi=(s,e={})=>{let t=s,{onlyVisible:i,dispatchEvent:r,events:n,eventPrefix:o}=Object.assign({},Nn,e),a=m=>{let u=(e==null?void 0:e.element)||t.element;if(!(u.contains(m.target)||!Bn(u)&&i)&&(t.clickOutside&&t.clickOutside(m),r)){let L=xn("click:outside",t,o),b=In(L,m,{controller:t});u.dispatchEvent(b)}},l=()=>{n==null||n.forEach(m=>{window.addEventListener(m,a,!1)})},h=()=>{n==null||n.forEach(m=>{window.removeEventListener(m,a,!1)})},y=t.disconnect.bind(t);return Object.assign(t,{disconnect(){h(),y()}}),l(),[l,h]};var gs=class extends P{};gs.debounces=[];var vs=class extends P{};vs.throttles=[];var Dn={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},$n={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},ui=(s,e={})=>{var t,i,r;let n=s,o=n.element.dataset.transitionTarget,a;o&&(a=n[`${o}Target`]);let l=(e==null?void 0:e.element)||a||n.element;if(!(l instanceof HTMLElement||l instanceof SVGElement))return;let h=l.dataset,y=parseInt(h.leaveAfter||"")||e.leaveAfter||0,{transitioned:m,hiddenClass:u,preserveOriginalClass:L,removeToClasses:b}=Object.assign({},$n,e),O=(t=n.enter)===null||t===void 0?void 0:t.bind(n),bs=(i=n.leave)===null||i===void 0?void 0:i.bind(n),ys=(r=n.toggleTransition)===null||r===void 0?void 0:r.bind(n);function Fe(p){return c(this,null,function*(){if(n.transitioned)return;n.transitioned=!0,O&&O(p);let T=K("enterFrom",e,h),W=K("enterActive",e,h),U=K("enterTo",e,h),z=K("leaveTo",e,h);u&&l.classList.remove(u),b||Y(l,z),yield ws(l,T,W,U,u,L,b),y>0&&setTimeout(()=>{ne(p)},y)})}function ne(p){return c(this,null,function*(){if(!n.transitioned)return;n.transitioned=!1,bs&&bs(p);let T=K("leaveFrom",e,h),W=K("leaveActive",e,h),U=K("leaveTo",e,h),z=K("enterTo",e,h);b||Y(l,z),yield ws(l,T,W,U,u,L,b),u&&l.classList.add(u)})}function Es(p){ys&&ys(p),n.transitioned?ne():Fe()}function ws(p,T,W,U,z,mi,fi){return c(this,null,function*(){let oe=[];mi&&(T.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k)),W.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k)),U.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k))),Re(p,T),Y(p,oe),Re(p,W),yield qn(),Y(p,T),Re(p,U),yield Vn(p),Y(p,W),fi&&Y(p,U),Re(p,oe)})}function di(){n.transitioned=m,m?(u&&l.classList.remove(u),Fe()):(u&&l.classList.add(u),ne())}function Re(p,T){T.length>0&&p.classList.add(...T)}function Y(p,T){T.length>0&&p.classList.remove(...T)}return di(),Object.assign(n,{enter:Fe,leave:ne,toggleTransition:Es}),[Fe,ne,Es]};function K(s,e,t){let i=`transition${s[0].toUpperCase()}${s.substr(1)}`,r=Dn[s],n=e[s]||t[i]||t[r]||" ";return jn(n)?[]:n.split(" ")}function Vn(s){return c(this,null,function*(){return new Promise(e=>{let t=Number(getComputedStyle(s).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{e(t)},t)})})}function qn(){return c(this,null,function*(){return new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(s)})})})}function jn(s){return s.length===0||!s.trim()}var Me=class extends P{connect(){this.html=document.querySelector("html"),hi(this),ui(this,{element:this.menuTarget})}disconnect(){this.html.style.overflow="auto"}toggle(){!this.menuTarget.classList.contains("hidden")?(this.html.style.overflow="auto",this.menuTarget.classList.add("hidden")):(this.html.style.overflow="hidden",this.menuTarget.classList.remove("hidden"))}};Ts(Me,"targets",["menu"]);Ce.register("mobile-menu",Me);})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=/assets/index.UE2APFTD.js.map
