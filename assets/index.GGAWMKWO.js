(()=>{var Ts=Object.defineProperty;var As=Object.getOwnPropertySymbols;var wi=Object.prototype.hasOwnProperty,Si=Object.prototype.propertyIsEnumerable;var ot=(s,e,t)=>e in s?Ts(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,at=(s,e)=>{for(var t in e||(e={}))wi.call(e,t)&&ot(s,t,e[t]);if(As)for(var t of As(e))Si.call(e,t)&&ot(s,t,e[t]);return s};var x=(s,e)=>()=>(s&&(e=s(s=0)),e);var Ai=(s,e)=>{for(var t in e)Ts(s,t,{get:e[t],enumerable:!0})};var Os=(s,e,t)=>(ot(s,typeof e!="symbol"?e+"":e,t),t);var l=(s,e,t)=>new Promise((i,r)=>{var n=c=>{try{a(t.next(c))}catch(h){r(h)}},o=c=>{try{a(t.throw(c))}catch(h){r(h)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(n,o);a((t=t.apply(s,e)).next())});var _,ze=x(()=>{_={logger:self.console,WebSocket:self.WebSocket}});var m,ie=x(()=>{ze();m={log(...s){this.enabled&&(s.push(Date.now()),_.logger.log("[ActionCable]",...s))}}});var pe,Ge,ge,Je,xt=x(()=>{ie();pe=()=>new Date().getTime(),Ge=s=>(pe()-s)/1e3,ge=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=pe(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),m.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=pe(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),m.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=pe()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,m.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=pe(),m.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),n=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+n)}reconnectIfStale(){this.connectionIsStale()&&(m.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Ge(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?m.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Ge(this.disconnectedAt)} s`):(m.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Ge(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Ge(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(m.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};ge.staleThreshold=6;ge.reconnectionBackoffRate=.15;Je=ge});var ve,It=x(()=>{ve={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var be,Nt,Lr,Vs,ye,Qe,Bt=x(()=>{ze();xt();It();ie();({message_types:be,protocols:Nt}=ve),Lr=Nt.slice(0,Nt.length-1),Vs=[].indexOf,ye=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Je(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return m.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...Nt,...this.consumer.subprotocols||[]];return m.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new _.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(m.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){m.log("Failed to reopen WebSocket",e)}finally{m.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Vs.call(Lr,this.getProtocol())>=0}isState(...e){return Vs.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in _.WebSocket)if(_.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};ye.reopenDelay=500;ye.prototype.events={message(s){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:r,type:n}=JSON.parse(s.data);switch(n){case be.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case be.disconnect:return m.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:r});case be.ping:return this.monitor.recordPing();case be.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case be.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(m.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return m.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(s){if(m.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){m.log("WebSocket onerror event")}};Qe=ye});var kr,Q,Dt=x(()=>{kr=function(s,e){if(e!=null)for(let t in e){let i=e[t];s[t]=i}return s},Q=class{constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),kr(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var $t,Xe,Vt=x(()=>{ie();$t=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(m.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):m.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){m.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{m.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Xe=$t});var X,qt=x(()=>{Dt();Vt();ie();X=class{constructor(e){this.consumer=e,this.guarantor=new Xe(this),this.subscriptions=[]}create(e,t){let i=e,r=typeof i=="object"?i:{channel:i},n=new Q(this.consumer,r,t);return this.add(n)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let r;return typeof e=="string"?r=this.findAll(e):r=[e],r.map(n=>typeof n[t]=="function"?n[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){m.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function jt(s){if(typeof s=="function"&&(s=s()),s&&!/^wss?:/i.test(s)){let e=document.createElement("a");return e.href=s,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return s}var re,qs=x(()=>{Bt();qt();re=class{constructor(e){this._url=e,this.subscriptions=new X(this),this.connection=new Qe(this),this.subprotocols=[]}get url(){return jt(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var Hs={};Ai(Hs,{Connection:()=>Qe,ConnectionMonitor:()=>Je,Consumer:()=>re,INTERNAL:()=>ve,Subscription:()=>Q,SubscriptionGuarantor:()=>Xe,Subscriptions:()=>X,adapters:()=>_,createConsumer:()=>Mr,createWebSocketURL:()=>jt,getConfig:()=>js,logger:()=>m});function Mr(s=js("url")||ve.default_mount_path){return new re(s)}function js(s){let e=document.head.querySelector(`meta[name='action-cable-${s}']`);if(e)return e.getAttribute("content")}var _s=x(()=>{Bt();xt();qs();It();Dt();qt();Vt();ze();ie()});(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;let s=HTMLElement,e={HTMLElement:function(){return Reflect.construct(s,[],this.constructor)}};window.HTMLElement=e.HTMLElement,HTMLElement.prototype=s.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,s)})();(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,r){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==r||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,r,n){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",n)}})(HTMLFormElement.prototype);var Fs=new WeakMap;function Ti(s){let e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return(t==null?void 0:t.type)=="submit"?t:null}function Oi(s){let e=Ti(s.target);e&&e.form&&Fs.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))s=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",Oi,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Fs.get(this.target)}})})();var j;(function(s){s.eager="eager",s.lazy="lazy"})(j||(j={}));var P=class extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new P.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="complete"?this.delegate.completeChanged():e=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get loading(){return Ci(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,t;return(t=(e=this.ownerDocument)===null||e===void 0?void 0:e.documentElement)===null||t===void 0?void 0:t.hasAttribute("data-turbo-preview")}};function Ci(s){switch(s.toLowerCase()){case"lazy":return j.lazy;default:return j.eager}}function S(s){return new URL(s.toString(),document.baseURI)}function G(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function Rt(s,e){let t=(e==null?void 0:e.getAttribute("formaction"))||s.getAttribute("action")||s.action;return S(t)}function Li(s){return(Ri(s).match(/\.[^.]*$/)||[])[0]||""}function ki(s){return!!Li(s).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function Mi(s,e){let t=xi(e);return s.href===S(t).href||s.href.startsWith(t)}function ee(s,e){return Mi(s,e)&&ki(s)}function ct(s){let e=G(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function xe(s){return ct(s)}function Fi(s,e){return S(s).href==S(e).href}function Pi(s){return s.pathname.split("/").slice(1)}function Ri(s){return Pi(s).slice(-1)[0]}function xi(s){return Ii(s.origin+s.pathname)}function Ii(s){return s.endsWith("/")?s:s+"/"}var ae=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return S(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function ce(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let e=document.createElement("script"),t=Be("csp-nonce");return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,Ni(e,s),e}}function Ni(s,e){for(let{name:t,value:i}of e.attributes)s.setAttribute(t,i)}function Bi(s){let e=document.createElement("template");return e.innerHTML=s,e.content}function E(s,{target:e,cancelable:t,detail:i}={}){let r=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(r):document.documentElement.dispatchEvent(r),r}function Ie(){return new Promise(s=>requestAnimationFrame(()=>s()))}function Di(){return new Promise(s=>setTimeout(()=>s(),0))}function $i(){return Promise.resolve()}function Ps(s=""){return new DOMParser().parseFromString(s,"text/html")}function Rs(s,...e){let t=Vi(s,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),r=i?i[0].length:0;return t.map(n=>n.slice(r)).join(`
`)}function Vi(s,e){return s.reduce((t,i,r)=>{let n=e[r]==null?"":e[r];return t+i+n},"")}function te(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Ne(s,...e){for(let t of e.map(i=>i==null?void 0:i.getAttribute(s)))if(typeof t=="string")return t;return null}function qi(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function lt(...s){for(let e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function ht(...s){for(let e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function ji(s,e=2e3){return new Promise(t=>{let i=()=>{s.removeEventListener("error",i),s.removeEventListener("load",i),t()};s.addEventListener("load",i,{once:!0}),s.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function xs(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Hi(s){return s=="advance"||s=="replace"||s=="restore"}function Ke(...s){let e=Ne("data-turbo-action",...s);return Hi(e)?e:null}function Is(s){return document.querySelector(`meta[name="${s}"]`)}function Be(s){let e=Is(s);return e&&e.content}function _i(s,e){let t=Is(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function De(s,e){var t;if(s instanceof Element)return s.closest(e)||De(s.assignedSlot||((t=s.getRootNode())===null||t===void 0?void 0:t.host),e)}var A;(function(s){s[s.get=0]="get",s[s.post=1]="post",s[s.put=2]="put",s[s.patch=3]="patch",s[s.delete=4]="delete"})(A||(A={}));function Ki(s){switch(s.toLowerCase()){case"get":return A.get;case"post":return A.post;case"put":return A.put;case"patch":return A.patch;case"delete":return A.delete}}var le=class{constructor(e,t,i,r=new URLSearchParams,n=null){this.abortController=new AbortController,this.resolveRequestPromise=o=>{},this.delegate=e,this.method=t,this.headers=this.defaultHeaders,this.body=r,this.url=i,this.target=n}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}perform(){return l(this,null,function*(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this),yield this.allowRequestToBeIntercepted(e);try{this.delegate.requestStarted(this);let t=yield fetch(this.url.href,e);return yield this.receive(t)}catch(t){if(t.name!=="AbortError")throw this.willDelegateErrorHandling(t)&&this.delegate.requestErrored(this,t),t}finally{this.delegate.requestFinished(this)}})}receive(e){return l(this,null,function*(){let t=new ae(e);return E("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t})}get fetchOptions(){var e;return{method:A[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(e=this.delegate.referrer)===null||e===void 0?void 0:e.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===A.get}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}allowRequestToBeIntercepted(e){return l(this,null,function*(){let t=new Promise(r=>this.resolveRequestPromise=r);E("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&(yield t)})}willDelegateErrorHandling(e){return!E("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}},ut=class{constructor(e,t){this.started=!1,this.intersect=i=>{let r=i.slice(-1)[0];r!=null&&r.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},B=class{static wrap(e){return typeof e=="string"?new this(Bi(e)):e}constructor(e){this.fragment=Wi(e)}};B.contentType="text/vnd.turbo-stream.html";function Wi(s){for(let e of s.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(ce(i));e.replaceWith(t)}return s}var V;(function(s){s[s.initialized=0]="initialized",s[s.requesting=1]="requesting",s[s.waiting=2]="waiting",s[s.receiving=3]="receiving",s[s.stopping=4]="stopping",s[s.stopped=5]="stopped"})(V||(V={}));var q;(function(s){s.urlEncoded="application/x-www-form-urlencoded",s.multipart="multipart/form-data",s.plain="text/plain"})(q||(q={}));function Ui(s){switch(s.toLowerCase()){case q.multipart:return q.multipart;case q.plain:return q.plain;default:return q.urlEncoded}}var J=class{static confirmMethod(e,t,i){return Promise.resolve(confirm(e))}constructor(e,t,i,r=!1){this.state=V.initialized,this.delegate=e,this.formElement=t,this.submitter=i,this.formData=zi(t,i),this.location=S(this.action),this.method==A.get&&Qi(this.location,[...this.body.entries()]),this.fetchRequest=new le(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=r}get method(){var e;let t=((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return Ki(t.toLowerCase())||A.get}get action(){var e;let t=typeof this.formElement.action=="string"?this.formElement.action:null;return!((e=this.submitter)===null||e===void 0)&&e.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||t||""}get body(){return this.enctype==q.urlEncoded||this.method==A.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var e;return Ui(((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((e,[t,i])=>e.concat(typeof i=="string"?[[t,i]]:[]),[])}start(){return l(this,null,function*(){let{initialized:e,requesting:t}=V,i=Ne("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!(yield J.confirmMethod(i,this.formElement,this.submitter)))&&this.state==e)return this.state=t,this.fetchRequest.perform()})}stop(){let{stopping:e,stopped:t}=V;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=Gi(Be("csrf-param"))||Be("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(B.contentType)}requestStarted(e){var t;this.state=V.waiting,(t=this.submitter)===null||t===void 0||t.setAttribute("disabled",""),this.setSubmitsWith(),E("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError)this.delegate.formSubmissionFailedWithResponse(this,t);else if(this.requestMustRedirect(e)&&Ji(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=V.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){var t;this.state=V.stopped,(t=this.submitter)===null||t===void 0||t.removeAttribute("disabled"),this.resetSubmitterText(),E("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||qi("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)===null||e===void 0?void 0:e.getAttribute("data-turbo-submits-with")}};function zi(s,e){let t=new FormData(s),i=e==null?void 0:e.getAttribute("name"),r=e==null?void 0:e.getAttribute("value");return i&&t.append(i,r||""),t}function Gi(s){if(s!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(s));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function Ji(s){return s.statusCode==200&&!s.redirected}function Qi(s,e){let t=new URLSearchParams;for(let[i,r]of e)r instanceof File||t.append(i,r);return s.search=t.toString(),s}var se=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){let e="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(let t of this.element.querySelectorAll("[autofocus]"))if(t.closest(e)==null)return t;return null}get permanentElements(){return Bs(this.element)}getPermanentElementById(e){return Ns(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:r}=i,n=e.getPermanentElementById(r);n&&(t[r]=[i,n])}return t}};function Ns(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function Bs(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var he=class{constructor(e,t){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=i=>{if(!i.defaultPrevented){let r=i.target instanceof HTMLFormElement?i.target:void 0,n=i.submitter||void 0;r&&Xi(r,n)&&Yi(r,n)&&this.delegate.willSubmitForm(r,n)&&(i.preventDefault(),i.stopImmediatePropagation(),this.delegate.formSubmitted(r,n))}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}};function Xi(s,e){return((e==null?void 0:e.getAttribute("formmethod"))||s.getAttribute("method"))!="dialog"}function Yi(s,e){if((e==null?void 0:e.hasAttribute("formtarget"))||s.hasAttribute("target")){let t=(e==null?void 0:e.getAttribute("formtarget"))||s.target;for(let i of document.getElementsByName(t))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}var $e=class{constructor(e,t){this.resolveRenderPromise=i=>{},this.resolveInterceptionPromise=i=>{},this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(G(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}render(e){return l(this,null,function*(){let{isPreview:t,shouldRender:i,newSnapshot:r}=e;if(i)try{this.renderPromise=new Promise(c=>this.resolveRenderPromise=c),this.renderer=e,yield this.prepareToRenderSnapshot(e);let n=new Promise(c=>this.resolveInterceptionPromise=c),o={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(r,o)||(yield n),yield this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(e.reloadReason)})}invalidate(e){this.delegate.viewInvalidated(e)}prepareToRenderSnapshot(e){return l(this,null,function*(){this.markAsPreview(e.isPreview),yield e.prepareToRender()})}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}renderSnapshot(e){return l(this,null,function*(){yield e.render()})}finishRenderingSnapshot(e){e.finishRendering()}},dt=class extends $e{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new se(this.element)}},Ve=class{constructor(e,t){this.clickBubbled=i=>{this.respondsToEventTarget(i.target)?this.clickEvent=i:delete this.clickEvent},this.linkClicked=i=>{this.clickEvent&&this.respondsToEventTarget(i.target)&&i.target instanceof Element&&this.delegate.shouldInterceptLinkClick(i.target,i.detail.url,i.detail.originalEvent)&&(this.clickEvent.preventDefault(),i.preventDefault(),this.delegate.linkClickIntercepted(i.target,i.detail.url,i.detail.originalEvent)),delete this.clickEvent},this.willVisit=i=>{delete this.clickEvent},this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},qe=class{constructor(e,t){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=i=>{if(i instanceof MouseEvent&&this.clickEventIsSignificant(i)){let r=i.composedPath&&i.composedPath()[0]||i.target,n=this.findLinkFromClickTarget(r);if(n&&Zi(n)){let o=this.getLocationForLink(n);this.delegate.willFollowLinkToLocation(n,o,i)&&(i.preventDefault(),this.delegate.followedLinkToLocation(n,o))}}},this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}findLinkFromClickTarget(e){return De(e,"a[href]:not([target^=_]):not([download])")}getLocationForLink(e){return S(e.getAttribute("href")||"")}};function Zi(s){if(s.hasAttribute("target")){for(let e of document.getElementsByName(s.target))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}var je=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new qe(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&e.hasAttribute("data-turbo-method")}followedLinkToLocation(e,t){let i=document.createElement("form"),r="hidden";for(let[d,u]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:r,name:d,value:u}));let n=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",n.href),i.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let c=Ke(e);c&&i.setAttribute("data-turbo-action",c);let h=e.getAttribute("data-turbo-confirm");h&&i.setAttribute("data-turbo-confirm",h),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},He=class{static preservingPermanentElements(e,t,i){return l(this,null,function*(){let r=new this(e,t);r.enter(),yield i(),r.leave()})}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=er(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){let t=this.getPlaceholderById(e.id);t==null||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function er(s){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var ue=class{constructor(e,t,i,r,n=!0){this.activeElement=null,this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=r,this.willRender=n,this.renderElement=i,this.promise=new Promise((o,a)=>this.resolvingFunctions={resolve:o,reject:a})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}preservingPermanentElements(e){return l(this,null,function*(){yield He.preservingPermanentElements(this,this.permanentElementMap,e)})}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;tr(e)&&e.focus()}enteringBardo(e){this.activeElement||e.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}};function tr(s){return s&&typeof s.focus=="function"}var de=class extends ue{static renderElement(e,t){var i;let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let n=t,o=(i=n.ownerDocument)===null||i===void 0?void 0:i.createRange();o&&(o.selectNodeContents(n),e.appendChild(o.extractContents()))}constructor(e,t,i,r,n,o=!0){super(t,i,r,n,o),this.delegate=e}get shouldRender(){return!0}render(){return l(this,null,function*(){yield Ie(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),yield Ie(),this.focusFirstAutofocusableElement(),yield Ie(),this.activateScriptElements()})}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=sr(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=ir(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=ce(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function sr(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function ir(s,e){return s=="auto"||s=="smooth"?s:e}var F=class{static get defaultCSS(){return Rs`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${F.animationDuration}ms ease-out,
          opacity ${F.animationDuration/2}ms ${F.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,F.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,F.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=F.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Be("csp-nonce")}};F.animationDuration=300;var mt=class extends se{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(e=>!ar(e)).map(e=>hr(e)).reduce((e,t)=>{let{outerHTML:i}=t,r=i in e?e[i]:{type:rr(t),tracked:nr(t),elements:[]};return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},r),{elements:[...r.elements,t]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:r,elements:n}=this.detailsByOuterHTML[t];return i==null&&!r?[...e,...n]:n.length>1?[...e,...n.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[r]}=this.detailsByOuterHTML[i];return lr(r,e)?r:t},void 0)}};function rr(s){if(or(s))return"script";if(cr(s))return"stylesheet"}function nr(s){return s.getAttribute("data-turbo-track")=="reload"}function or(s){return s.localName=="script"}function ar(s){return s.localName=="noscript"}function cr(s){let e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function lr(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function hr(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var O=class extends se{static fromHTMLString(e=""){return this.fromDocument(Ps(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({head:e,body:t}){return new this(t,new mt(e))}constructor(e,t){super(e),this.headSnapshot=t}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[r,n]of t.entries()){let o=i[r];for(let a of o.selectedOptions)a.selected=!1;for(let a of n.selectedOptions)o.options[a.index].selected=!0}for(let r of e.querySelectorAll('input[type="password"]'))r.value="";return new O(e,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var e;let t=(e=this.getSetting("root"))!==null&&e!==void 0?e:"/";return S(t)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},Z;(function(s){s.visitStart="visitStart",s.requestStart="requestStart",s.requestEnd="requestEnd",s.visitEnd="visitEnd"})(Z||(Z={}));var M;(function(s){s.initialized="initialized",s.started="started",s.canceled="canceled",s.failed="failed",s.completed="completed"})(M||(M={}));var ur={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},H;(function(s){s[s.networkFailure=0]="networkFailure",s[s.timeoutFailure=-1]="timeoutFailure",s[s.contentTypeMismatch=-2]="contentTypeMismatch"})(H||(H={}));var ft=class{constructor(e,t,i,r={}){this.identifier=te(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=M.initialized,this.delegate=e,this.location=t,this.restorationIdentifier=i||te();let{action:n,historyChanged:o,referrer:a,snapshot:c,snapshotHTML:h,response:b,visitCachedSnapshot:d,willRender:u,updateHistory:C,shouldCacheSnapshot:y,acceptsStreamResponse:L}=Object.assign(Object.assign({},ur),r);this.action=n,this.historyChanged=o,this.referrer=a,this.snapshot=c,this.snapshotHTML=h,this.response=b,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=d,this.willRender=u,this.updateHistory=C,this.scrolled=!u,this.shouldCacheSnapshot=y,this.acceptsStreamResponse=L}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==M.initialized&&(this.recordTimingMetric(Z.visitStart),this.state=M.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==M.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=M.canceled)}complete(){this.state==M.started&&(this.recordTimingMetric(Z.visitEnd),this.state=M.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==M.started&&(this.state=M.failed,this.adapter.visitFailed(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){let t=this.location.href===((e=this.referrer)===null||e===void 0?void 0:e.href)?"replace":this.action,i=xs(t);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new le(this,A.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Z.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;Cs(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Z.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(()=>l(this,null,function*(){this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&(yield this.view.renderPromise),Cs(e)&&t!=null?(yield this.view.renderPage(O.fromHTMLString(t),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(yield this.view.renderError(O.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail())}))}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!G(this.location)||e.hasAnchor(G(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return O.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(()=>l(this,null,function*(){this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&(yield this.view.renderPromise),yield this.view.renderPage(e,t,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),t||this.complete())}))}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&((e=this.response)===null||e===void 0?void 0:e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(()=>l(this,null,function*(){this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)}))}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(B.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}requestSucceededWithResponse(e,t){return l(this,null,function*(){let i=yield t.responseHTML,{redirected:r,statusCode:n}=t;i==null?this.recordResponse({statusCode:H.contentTypeMismatch,redirected:r}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:i,redirected:r}))})}requestFailedWithResponse(e,t){return l(this,null,function*(){let i=yield t.responseHTML,{redirected:r,statusCode:n}=t;i==null?this.recordResponse({statusCode:H.contentTypeMismatch,redirected:r}):this.recordResponse({statusCode:n,responseHTML:i,redirected:r})})}requestErrored(e,t){this.recordResponse({statusCode:H.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=G(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}render(e){return l(this,null,function*(){this.cancelRender(),yield new Promise(t=>{this.frame=requestAnimationFrame(()=>t())}),yield e(),delete this.frame})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Cs(s){return s>=200&&s<300}var pt=class{constructor(e){this.progressBar=new F,this.showProgressBar=()=>{this.progressBar.show()},this.session=e}visitProposedToLocation(e,t){this.navigator.startVisit(e,(t==null?void 0:t.restorationIdentifier)||te(),t)}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case H.networkFailure:case H.timeoutFailure:case H.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(e){}pageInvalidated(e){this.reload(e)}visitFailed(e){}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;E("turbo:reload",{detail:e}),window.location.href=((t=this.location)===null||t===void 0?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}},gt=class{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},vt=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new Ve(this,t),this.formSubmitObserver=new he(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.shouldRedirect(e)}linkClickIntercepted(e,t,i){let r=this.findFrameElement(e);r&&r.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.shouldSubmit(e,t)&&this.shouldRedirect(e,t)}formSubmitted(e,t){let i=this.findFrameElement(e,t);i&&i.delegate.formSubmitted(e,t)}shouldSubmit(e,t){var i;let r=Rt(e,t),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=S((i=n==null?void 0:n.content)!==null&&i!==void 0?i:"/");return this.shouldRedirect(e,t)&&ee(r,o)}shouldRedirect(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let r=this.findFrameElement(e,t);return r?r!=e.closest("turbo-frame"):!1}else return!1}findFrameElement(e,t){let i=(t==null?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let r=this.element.querySelector(`#${i}:not([disabled])`);if(r instanceof P)return r}}},bt=class{constructor(e){this.restorationIdentifier=te(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=t=>{if(this.shouldHandlePopState()){let{turbo:i}=t.state||{};if(i){this.location=new URL(window.location.href);let{restorationIdentifier:r}=i;this.restorationIdentifier=r,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,r)}}},this.onPageLoad=t=>l(this,null,function*(){yield $i(),this.pageLoaded=!0}),this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=te()){let r={turbo:{restorationIdentifier:i}};e.call(history,r,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]=Object.assign(Object.assign({},i),e)}assumeControlOfScrollRestoration(){var e;this.previousScrollRestoration||(this.previousScrollRestoration=(e=history.scrollRestoration)!==null&&e!==void 0?e:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},yt=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&(ee(e,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(e,t):window.location.href=e.toString())}startVisit(e,t,i={}){this.stop(),this.currentVisit=new ft(this,S(e),t,Object.assign({referrer:this.location},i)),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new J(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}formSubmissionSucceededWithResponse(e,t){return l(this,null,function*(){if(e==this.formSubmission){let i=yield t.responseHTML;if(i){let r=e.isSafe;r||this.view.clearSnapshotCache();let{statusCode:n,redirected:o}=t,c={action:this.getActionForFormSubmission(e),shouldCacheSnapshot:r,response:{statusCode:n,responseHTML:i,redirected:o}};this.proposeVisit(t.location,c)}}})}formSubmissionFailedWithResponse(e,t){return l(this,null,function*(){let i=yield t.responseHTML;if(i){let r=O.fromHTMLString(i);t.serverError?yield this.view.renderError(r,this.currentVisit):yield this.view.renderPage(r,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}})}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let i=G(e),r=G(this.view.lastRenderedLocation),n=t==="restore"&&typeof i=="undefined";return t!=="replace"&&ct(e)===ct(this.view.lastRenderedLocation)&&(n||i!=null&&i!==r)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:e,formElement:t}){return Ke(e,t)||"advance"}},N;(function(s){s[s.initial=0]="initial",s[s.loading=1]="loading",s[s.interactive=2]="interactive",s[s.complete=3]="complete"})(N||(N={}));var Et=class{constructor(e){this.stage=N.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:t}=this;t=="interactive"?this.pageIsInteractive():t=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=e}start(){this.started||(this.stage==N.initial&&(this.stage=N.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==N.loading&&(this.stage=N.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==N.interactive&&(this.stage=N.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},wt=class{constructor(e){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}},St=class{render({fragment:e}){He.preservingPermanentElements(this,dr(e),()=>document.documentElement.appendChild(e))}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function dr(s){let e=Bs(document.documentElement),t={};for(let i of e){let{id:r}=i;for(let n of s.querySelectorAll("turbo-stream")){let o=Ns(n.templateElement.content,r);o&&(t[r]=[i,o])}}return t}var At=class{constructor(e){this.sources=new Set,this.started=!1,this.inspectFetchResponse=t=>{let i=mr(t);i&&fr(i)&&(t.preventDefault(),this.receiveMessageResponse(i))},this.receiveMessageEvent=t=>{this.started&&typeof t.data=="string"&&this.receiveMessageHTML(t.data)},this.delegate=e}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}receiveMessageResponse(e){return l(this,null,function*(){let t=yield e.responseHTML;t&&this.receiveMessageHTML(t)})}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(B.wrap(e))}};function mr(s){var e;let t=(e=s.detail)===null||e===void 0?void 0:e.fetchResponse;if(t instanceof ae)return t}function fr(s){var e;return((e=s.contentType)!==null&&e!==void 0?e:"").startsWith(B.contentType)}var _e=class extends ue{static renderElement(e,t){let{documentElement:i,body:r}=document;i.replaceChild(t,r)}render(){return l(this,null,function*(){this.replaceHeadAndBody(),this.activateScriptElements()})}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=ce(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},me=class extends ue{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}prepareToRender(){return l(this,null,function*(){yield this.mergeHead()})}render(){return l(this,null,function*(){this.willRender&&(yield this.replaceBody())})}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}mergeHead(){return l(this,null,function*(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),yield e,yield t})}replaceBody(){return l(this,null,function*(){yield this.preservingPermanentElements(()=>l(this,null,function*(){this.activateNewBody(),yield this.assignNewBody()}))})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}copyNewHeadStylesheetElements(){return l(this,null,function*(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(ji(t)),document.head.appendChild(t);yield Promise.all(e)})}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(ce(e))}mergeProvisionalElements(){return l(this,null,function*(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)})}isCurrentElementInElementList(e,t){for(let[i,r]of t.entries()){if(e.tagName=="TITLE"){if(r.tagName!="TITLE")continue;if(e.innerHTML==r.innerHTML)return t.splice(i,1),!0}if(r.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=ce(e);e.replaceWith(t)}}assignNewBody(){return l(this,null,function*(){yield this.renderElement(this.currentElement,this.newElement)})}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Tt=class{constructor(e){this.keys=[],this.snapshots={},this.size=e}has(e){return xe(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[xe(e)]}write(e,t){this.snapshots[xe(e)]=t}touch(e){let t=xe(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Ot=class extends $e{constructor(){super(...arguments),this.snapshotCache=new Tt(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(e,t=!1,i=!0,r){let n=new me(this.snapshot,e,me.renderElement,t,i);return n.shouldRender?r==null||r.changeHistory():this.forceReloaded=!0,this.render(n)}renderError(e,t){t==null||t.changeHistory();let i=new _e(this.snapshot,e,_e.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}cacheSnapshot(){return l(this,arguments,function*(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;yield Di();let i=e.clone();return this.snapshotCache.put(t,i),i}})}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}get snapshot(){return O.fromElement(this.element)}},Ct=class{constructor(e){this.selector="a[data-turbo-preload]",this.delegate=e}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.preloadURL(t)}preloadURL(e){return l(this,null,function*(){let t=new URL(e.href);if(!this.snapshotCache.has(t))try{let r=yield(yield fetch(t.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),n=O.fromHTMLString(r);this.snapshotCache.put(t,n)}catch(i){}})}},Lt=class{constructor(){this.navigator=new yt(this),this.history=new bt(this),this.preloader=new Ct(this),this.view=new Ot(this,document.documentElement),this.adapter=new pt(this),this.pageObserver=new Et(this),this.cacheObserver=new gt,this.linkClickObserver=new qe(this,window),this.formSubmitObserver=new he(this,document),this.scrollObserver=new wt(this),this.streamObserver=new At(this),this.formLinkClickObserver=new je(this,document.documentElement),this.frameRedirector=new vt(this,document.documentElement),this.streamMessageRenderer=new St,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;i instanceof P?(i.src=e.toString(),i.loaded):this.navigator.proposeVisit(S(e),t)}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(B.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(e,t){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&ee(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&ee(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),r=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:r})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Ls(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||lt(document.documentElement),Ls(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){ht(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=Rt(e,t);return this.submissionIsNavigatable(e,t)&&ee(S(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;!((e=this.navigator.currentVisit)===null||e===void 0)&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:r,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!r}viewRenderedSnapshot(e,t){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return E("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return E("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return E("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return E("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return E("turbo:before-render",{detail:Object.assign({newBody:e},t),cancelable:!0})}notifyApplicationAfterRender(){return E("turbo:render")}notifyApplicationAfterPageLoad(e={}){return E("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return E("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return E("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=De(e,"[data-turbo]"),i=De(e,"turbo-frame");return this.drive||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Ke(e)||"advance"}get snapshot(){return this.view.snapshot}};function Ls(s){Object.defineProperties(s,pr)}var pr={absoluteURL:{get(){return this.toString()}}},kt=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(e){_i("turbo-cache-control",e)}},Ds={after(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,s.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>{var e;return(e=s.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,s)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){this.targetElements.forEach(s=>s.replaceWith(this.templateContent))},update(){this.targetElements.forEach(s=>{s.innerHTML="",s.append(this.templateContent)})}},g=new Lt,gr=new kt(g),{navigator:vr}=g;function $s(){g.start()}function br(s){g.registerAdapter(s)}function yr(s,e){g.visit(s,e)}function We(s){g.connectStreamSource(s)}function Ue(s){g.disconnectStreamSource(s)}function Er(s){g.renderStreamMessage(s)}function wr(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),g.clearCache()}function Sr(s){g.setProgressBarDelay(s)}function Ar(s){J.confirmMethod=s}function Tr(s){g.setFormMode(s)}var Or=Object.freeze({__proto__:null,navigator:vr,session:g,cache:gr,PageRenderer:me,PageSnapshot:O,FrameRenderer:de,start:$s,registerAdapter:br,visit:yr,connectStreamSource:We,disconnectStreamSource:Ue,renderStreamMessage:Er,clearCache:wr,setProgressBarDelay:Sr,setConfirmMethod:Ar,setFormMode:Tr,StreamActions:Ds}),Mt=class extends Error{},Ft=class{constructor(e){this.fetchResponseLoaded=t=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:t})=>{let i=t.querySelector("#"+this.element.id);i&&this.previousFrameElement&&i.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=e,this.view=new dt(this,this.element),this.appearanceObserver=new ut(this,this.element),this.formLinkClickObserver=new je(this,this.element),this.linkInterceptor=new Ve(this,this.element),this.restorationIdentifier=te(),this.formSubmitObserver=new he(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==j.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==j.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==j.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){let{src:e}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=e,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==j.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}loadSourceURL(){return l(this,null,function*(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(S(this.sourceURL)),this.appearanceObserver.stop(),yield this.element.loaded,this.hasBeenLoaded=!0)})}loadResponse(e){return l(this,null,function*(){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=yield e.responseHTML;if(t){let i=Ps(t);O.fromDocument(i).isVisitable?yield this.loadFrameResponse(e,i):yield this.handleUnvisitableFrameResponse(e)}}finally{this.fetchResponseLoaded=()=>{}}})}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,e),this.loadSourceURL()}willSubmitFormLinkToLocation(e){return this.shouldInterceptNavigation(e)}submittedFormLinkToLocation(e,t,i){let r=this.findFrameElement(e);r&&i.setAttribute("data-turbo-frame",r.id)}shouldInterceptLinkClick(e,t,i){return this.shouldInterceptNavigation(e)}linkClickIntercepted(e,t){this.navigateFrame(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new J(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,!((t=this.currentNavigationElement)===null||t===void 0)&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(B.contentType)}requestStarted(e){lt(this.element)}requestPreventedHandlingResponse(e,t){this.resolveVisitPromise()}requestSucceededWithResponse(e,t){return l(this,null,function*(){yield this.loadResponse(t),this.resolveVisitPromise()})}requestFailedWithResponse(e,t){return l(this,null,function*(){yield this.loadResponse(t),this.resolveVisitPromise()})}requestErrored(e,t){console.error(t),this.resolveVisitPromise()}requestFinished(e){ht(this.element)}formSubmissionStarted({formElement:e}){lt(e,this.findFrameElement(e))}formSubmissionSucceededWithResponse(e,t){let i=this.findFrameElement(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,e.formElement,e.submitter),i.delegate.loadResponse(t),e.isSafe||g.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),g.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){ht(e,this.findFrameElement(e))}allowsImmediateRender({element:e},t){let i=E("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:e},t),cancelable:!0}),{defaultPrevented:r,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!r}viewRenderedSnapshot(e,t){}preloadOnLoadLinksForView(e){g.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}loadFrameResponse(e,t){return l(this,null,function*(){let i=yield this.extractForeignFrameElement(t.body);if(i){let r=new se(i),n=new de(this,this.view.snapshot,r,de.renderElement,!1,!1);this.view.renderPromise&&(yield this.view.renderPromise),this.changeHistory(),yield this.view.render(n),this.complete=!0,g.frameRendered(e,this.element),g.frameLoaded(this.element),this.fetchResponseLoaded(e)}else this.willHandleFrameMissingFromResponse(e)&&this.handleFrameMissingFromResponse(e)})}visit(e){return l(this,null,function*(){var t;let i=new le(this,A.get,e,new URLSearchParams,this.element);return(t=this.currentFetchRequest)===null||t===void 0||t.cancel(),this.currentFetchRequest=i,new Promise(r=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,r()},i.perform()})})}navigateFrame(e,t,i){let r=this.findFrameElement(e,i);r.delegate.proposeVisitIfNavigatedWithAction(r,e,i),this.withCurrentNavigationElement(e,()=>{r.src=t})}proposeVisitIfNavigatedWithAction(e,t,i){if(this.action=Ke(i,t,e),this.action){let r=O.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=o=>{if(e.src){let{statusCode:a,redirected:c}=o,h=e.ownerDocument.documentElement.outerHTML,d={response:{statusCode:a,redirected:c,responseHTML:h},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(d.action=this.action),g.visit(e.src,d)}}}}changeHistory(){if(this.action){let e=xs(this.action);g.history.update(e,S(this.element.src||""),this.restorationIdentifier)}}handleUnvisitableFrameResponse(e){return l(this,null,function*(){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),yield this.visitResponse(e.response)})}willHandleFrameMissingFromResponse(e){this.element.setAttribute("complete","");let t=e.response,i=(a,...c)=>l(this,[a,...c],function*(n,o={}){n instanceof Response?this.visitResponse(n):g.visit(n,o)});return!E("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(e){this.view.missing(),this.throwFrameMissingError(e)}throwFrameMissingError(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Mt(t)}visitResponse(e){return l(this,null,function*(){let t=new ae(e),i=yield t.responseHTML,{location:r,redirected:n,statusCode:o}=t;return g.visit(r,{response:{redirected:n,statusCode:o,responseHTML:i}})})}findFrameElement(e,t){var i;let r=Ne("data-turbo-frame",t,e)||this.element.getAttribute("target");return(i=ks(r))!==null&&i!==void 0?i:this.element}extractForeignFrameElement(e){return l(this,null,function*(){let t,i=CSS.escape(this.id);try{if(t=Ms(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=Ms(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return yield t.loaded,yield this.extractForeignFrameElement(t)}catch(r){return console.error(r),new P}return null})}formActionIsVisitable(e,t){let i=Rt(e,t);return ee(S(i),this.rootLocation)}shouldInterceptNavigation(e,t){let i=Ne("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.formActionIsVisitable(e,t)||!this.enabled||i=="_top")return!1;if(i){let r=ks(i);if(r)return!r.disabled}return!(!g.elementIsNavigatable(e)||t&&!g.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.ignoringChangesToAttribute("src",()=>{this.element.src=e!=null?e:null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){this.ignoringChangesToAttribute("complete",()=>{e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var e;let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),i=(e=t==null?void 0:t.content)!==null&&e!==void 0?e:"/";return S(i)}isIgnoringChangesTo(e){return this.ignoredAttributes.has(e)}ignoringChangesToAttribute(e,t){this.ignoredAttributes.add(e),t(),this.ignoredAttributes.delete(e)}withCurrentNavigationElement(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function ks(s){if(s!=null){let e=document.getElementById(s);if(e instanceof P)return e}}function Ms(s,e){if(s){let t=s.getAttribute("src");if(t!=null&&e!=null&&Fi(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof P)return s.connectedCallback(),s.disconnectedCallback(),s}}var fe=class extends HTMLElement{static renderElement(e){return l(this,null,function*(){yield e.performAction()})}connectedCallback(){return l(this,null,function*(){try{yield this.render()}catch(e){console.error(e)}finally{this.disconnect()}})}render(){return l(this,null,function*(){var e;return(e=this.renderPromise)!==null&&e!==void 0?e:this.renderPromise=(()=>l(this,null,function*(){let t=this.beforeRenderEvent;this.dispatchEvent(t)&&(yield Ie(),yield t.detail.render(this))}))()})}disconnect(){try{this.remove()}catch(e){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){var e;let t=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),i=[...((e=this.templateContent)===null||e===void 0?void 0:e.children)||[]].filter(r=>!!r.id).map(r=>r.id);return t.filter(r=>i.includes(r.id))}get performAction(){if(this.action){let e=Ds[this.action];if(e)return e;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(e){throw new Error(`${this.description}: ${e}`)}get description(){var e,t;return(t=((e=this.outerHTML.match(/<[^>]+>/))!==null&&e!==void 0?e:[])[0])!==null&&t!==void 0?t:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:fe.renderElement}})}get targetElementsById(){var e;let t=(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var e;let t=(e=this.ownerDocument)===null||e===void 0?void 0:e.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}},Pt=class extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),We(this.streamSource)}disconnectedCallback(){this.streamSource&&Ue(this.streamSource)}get src(){return this.getAttribute("src")||""}};P.delegateConstructor=Ft;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",P);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",fe);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Pt);(()=>{let s=document.currentScript;if(!!s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(Rs`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo=Or;$s();var Ws;function Fr(){return l(this,null,function*(){return Ws||Ks(Pr().then(Ks))})}function Ks(s){return Ws=s}function Pr(){return l(this,null,function*(){let{createConsumer:s}=yield Promise.resolve().then(()=>(_s(),Hs));return s()})}function Us(s,e){return l(this,null,function*(){let{subscriptions:t}=yield Fr();return t.create(s,e)})}function Ee(s){return!s||typeof s!="object"||s instanceof Date||s instanceof RegExp?s:Array.isArray(s)?s.map(Ee):Object.keys(s).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(r,n){return"_"+n.toLowerCase()});return e[i]=Ee(s[t]),e},{})}var Ht=class extends HTMLElement{connectedCallback(){return l(this,null,function*(){We(this),this.subscription=yield Us(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})})}disconnectedCallback(){Ue(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return at({channel:e,signed_stream_name:t},Ee(at({},this.dataset)))}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Ht);function zs(s){if(s.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=s;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let r=Nr(t.body)?t.body:new URLSearchParams,n=xr(i,r,e);/get/i.test(n)||(/post/i.test(n)?r.delete("_method"):r.set("_method",n),t.method="post")},{once:!0})}}function xr(s,e,t){let i=Ir(s),r=e.get("_method"),n=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof r=="string"?r:n}function Ir(s){return(s instanceof HTMLButtonElement||s instanceof HTMLInputElement)&&s.hasAttribute("formmethod")?s.formMethod:null}function Nr(s){return s instanceof FormData||s instanceof URLSearchParams}addEventListener("turbo:before-fetch-request",zs);var _t=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Br(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,r=t.index;return i<r?-1:i>r?1:0})}};function Br(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var Kt=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:i,eventOptions:r}=e,n=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,r);n.delete(o),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:r}=e;return this.fetchEventListener(t,i,r)}fetchEventListener(e,t,i){let r=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,i),o=r.get(n);return o||(o=this.createEventListener(e,t,i),r.set(n,o)),o}createEventListener(e,t,i){let r=new _t(e,t,i);return this.started&&r.connect(),r}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(r=>{i.push(`${t[r]?"":"!"}${r}`)}),i.join(":")}},Dr={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},$r=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Vr(s){let t=s.trim().match($r)||[],i=t[2],r=t[3];return r&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${r}`,r=""),{eventTarget:qr(t[4]),eventName:i,eventOptions:t[7]?jr(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||r}}function qr(s){if(s=="window")return window;if(s=="document")return document}function jr(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function Hr(s){if(s==window)return"window";if(s==document)return"document"}function us(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Wt(s){return us(s.replace(/--/g,"-").replace(/__/g,"_"))}function Ae(s){return s.charAt(0).toUpperCase()+s.slice(1)}function ii(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function _r(s){return s.match(/[^\s]+/g)||[]}function Gs(s){return s!=null}function Ut(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var Js=["meta","ctrl","alt","shift"],zt=class{constructor(e,t,i,r){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||Kr(e)||Ye("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Ye("missing identifier"),this.methodName=i.methodName||Ye("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=r}static forToken(e,t){return new this(e.element,e.index,Vr(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let i=t.filter(r=>!Js.includes(r))[0];return i?(Ut(this.keyMappings,i)||Ye(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:r}of Array.from(this.element.attributes)){let n=i.match(t),o=n&&n[1];o&&(e[us(o)]=Wr(r))}return e}get eventTargetName(){return Hr(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[i,r,n,o]=Js.map(a=>t.includes(a));return e.metaKey!==i||e.ctrlKey!==r||e.altKey!==n||e.shiftKey!==o}},Qs={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Kr(s){let e=s.tagName.toLowerCase();if(e in Qs)return Qs[e](s)}function Ye(s){throw new Error(s)}function Wr(s){try{return JSON.parse(s)}catch(e){return s}}var Gt=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:r}=this.context,n=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in i){let c=i[o];n=n&&c({name:o,value:a,event:e,element:t,controller:r})}else continue;return n}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(r){let{identifier:n,controller:o,element:a,index:c}=this,h={identifier:n,controller:o,element:a,index:c,event:e};this.context.handleError(r,`invoking action "${this.action}"`,h)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Ze=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},et=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new Ze(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Ur(s,e,t){ri(s,e).add(t)}function zr(s,e,t){ri(s,e).delete(t),Gr(s,e)}function ri(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Gr(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var D=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){Ur(this.valuesByKey,e,t)}delete(e,t){zr(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var Jt=class{constructor(e,t,i,r){this._selector=t,this.details=r,this.elementObserver=new Ze(e,this),this.delegate=i,this.matchesByElement=new D}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let i=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(t)).filter(n=>this.matchElement(n));return i.concat(r)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){let{selector:i}=this;if(i){let r=this.matchElement(e),n=this.matchesByElement.has(i,e);r&&!n?this.selectorMatched(e,i):!r&&n&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},Qt=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let r=this.element.getAttribute(e);if(this.stringMap.get(e)!=r&&this.stringMapValueChanged(r,i,t),r==null){let n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(i,e,n)}else this.stringMap.set(e,r)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},tt=class{constructor(e,t,i){this.attributeObserver=new et(e,t,this),this.delegate=i,this.tokensByElement=new D}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),r=Qr(t,i).findIndex(([n,o])=>!Xr(n,o));return r==-1?[[],[]]:[t.slice(r),i.slice(r)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return Jr(i,e,t)}};function Jr(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,r)=>({element:e,attributeName:t,content:i,index:r}))}function Qr(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(i,r)=>[s[r],e[r]])}function Xr(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var st=class{constructor(e,t,i){this.tokenListObserver=new tt(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},Xt=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new st(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Gt(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=zt.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Yt=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Qt(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let r=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=r.writer(r.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let r=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,r.writer(this.receiver[e]),i):this.invokeChangedCallback(e,r.writer(r.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:r}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,r(i),void 0)}invokeChangedCallback(e,t,i){let r=`${e}Changed`,n=this.receiver[r];if(typeof n=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),c=i;i&&(c=o.reader(i)),n.call(this.receiver,a,c)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${Ae(t.name)}`;return this.receiver[i]}},Zt=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new D}start(){this.tokenListObserver||(this.tokenListObserver=new tt(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Te(s,e){let t=ni(s);return Array.from(t.reduce((i,r)=>(Zr(r,e).forEach(n=>i.add(n)),i),new Set))}function Yr(s,e){return ni(s).reduce((i,r)=>(i.push(...en(r,e)),i),[])}function ni(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function Zr(s,e){let t=s[e];return Array.isArray(t)?t:[]}function en(s,e){let t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}var es=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new D,this.outletElementsByName=new D,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){let r=this.getOutlet(e,i);r&&this.connectOutlet(r,e,i)}selectorUnmatched(e,t,{outletName:i}){let r=this.getOutletFromMap(e,i);r&&this.disconnectOutlet(r,e,i)}selectorMatchElement(e,{outletName:t}){let i=this.selector(t),r=this.hasOutlet(e,t),n=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?r&&n&&e.matches(i):!1}elementMatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var r;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(r=this.selectorObserverMap.get(i))===null||r===void 0||r.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var r;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(r=this.selectorObserverMap.get(i))===null||r===void 0||r.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),i=new Jt(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),i=new et(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new D;return this.router.modules.forEach(t=>{let i=t.definition.controllerConstructor;Te(i,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},ts=class{constructor(e,t){this.logDebugActivity=(i,r={})=>{let{identifier:n,controller:o,element:a}=this;r=Object.assign({identifier:n,controller:o,element:a},r),this.application.logDebugActivity(this.identifier,i,r)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Xt(this,this.dispatcher),this.valueObserver=new Yt(this,this.controller),this.targetObserver=new Zt(this,this),this.outletObserver=new es(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:r,controller:n,element:o}=this;i=Object.assign({identifier:r,controller:n,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${Wt(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${Wt(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function tn(s){return sn(s,rn(s))}function sn(s,e){let t=cn(s),i=nn(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function rn(s){return Te(s,"blessings").reduce((t,i)=>{let r=i(s);for(let n in r){let o=t[n]||{};t[n]=Object.assign(o,r[n])}return t},{})}function nn(s,e){return an(e).reduce((t,i)=>{let r=on(s,e,i);return r&&Object.assign(t,{[i]:r}),t},{})}function on(s,e,t){let i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){let n=Object.getOwnPropertyDescriptor(e,t).value;return i&&(n.get=i.get||n.get,n.set=i.set||n.set),n}}var an=(()=>typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames)(),cn=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch(t){return i=>class extends i{}}})();function ln(s){return{identifier:s.identifier,controllerConstructor:tn(s.controllerConstructor)}}var ss=class{constructor(e,t){this.application=e,this.definition=ln(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ts(this,e),this.contextsByScope.set(e,t)),t}},is=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return _r(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},rs=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${ii(e)}`}},ns=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(i,e))}};function os(s,e){return`[${s}~="${e}"]`}var as=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return os(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return os(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,r=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${r}="${i}.${t}" with ${n}="${t}". The ${r} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},cs=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(r=>this.matchesElement(r,e,t))}matchesElement(e,t,i){let r=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&r.split(" ").includes(i)}},we=class{constructor(e,t,i,r){this.targets=new as(this),this.classes=new is(this),this.data=new rs(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new ns(r),this.outlets=new cs(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return os(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new we(this.schema,document.documentElement,this.identifier,this.guide.logger)}},ls=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new st(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){let i=this.fetchScopesByIdentifierForElement(e),r=i.get(t);return r||(r=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,r)),r}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},hs=class{constructor(e){this.application=e,this.scopeObserver=new ls(this.element,this.schema,this),this.scopesByIdentifier=new D,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new ss(this.application,e);this.connectModule(t);let i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(r=>r.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new we(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},hn={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Xs("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Xs("0123456789".split("").map(s=>[s,s])))};function Xs(s){return s.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}var it=class{constructor(e=document.documentElement,t=hn){this.logger=console,this.debug=!1,this.logDebugActivity=(i,r,n={})=>{this.debug&&this.logFormattedMessage(i,r,n)},this.element=e,this.schema=t,this.dispatcher=new Kt(this),this.router=new hs(this),this.actionDescriptorFilters=Object.assign({},Dr)}static start(e,t){let i=new this(e,t);return i.start(),i}start(){return l(this,null,function*(){yield un(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")})}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>{r.controllerConstructor.shouldLoad&&this.router.loadDefinition(r)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(r=>this.router.unloadIdentifier(r))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var r;this.logger.error(`%s

%o

%o`,t,e,i),(r=window.onerror)===null||r===void 0||r.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function un(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function dn(s){return Te(s,"classes").reduce((t,i)=>Object.assign(t,mn(i)),{})}function mn(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${Ae(s)}Class`]:{get(){return this.classes.has(s)}}}}function fn(s){return Te(s,"outlets").reduce((t,i)=>Object.assign(t,pn(i)),{})}function Ys(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function Zs(s,e,t){let i=Ys(s,e,t);if(i||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=Ys(s,e,t),i))return i}function pn(s){let e=Wt(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t){let r=Zs(this,t,s);if(r)return r;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(i=>{let r=Zs(this,i,s);if(r)return r;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${Ae(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function gn(s){return Te(s,"targets").reduce((t,i)=>Object.assign(t,vn(i)),{})}function vn(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${Ae(s)}Target`]:{get(){return this.targets.has(s)}}}}function bn(s){let e=Yr(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,r)=>{let n=oi(r,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(i,{[o]:n})},{})}}};return e.reduce((i,r)=>Object.assign(i,yn(r)),t)}function yn(s,e){let t=oi(s,e),{key:i,name:r,reader:n,writer:o}=t;return{[r]:{get(){let a=this.data.get(i);return a!==null?n(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${Ae(r)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function oi([s,e],t){return An({controller:t,token:s,typeDefinition:e})}function rt(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Se(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function En(s){let{controller:e,token:t,typeObject:i}=s,r=Gs(i.type),n=Gs(i.default),o=r&&n,a=r&&!n,c=!r&&n,h=rt(i.type),b=Se(s.typeObject.default);if(a)return h;if(c)return b;if(h!==b){let d=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${d}" must match the defined type "${h}". The provided default value of "${i.default}" is of type "${b}".`)}if(o)return h}function wn(s){let{controller:e,token:t,typeDefinition:i}=s,n=En({controller:e,token:t,typeObject:i}),o=Se(i),a=rt(i),c=n||o||a;if(c)return c;let h=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${h}" for "${t}" value`)}function Sn(s){let e=rt(s);if(e)return ei[e];let t=Ut(s,"default"),i=Ut(s,"type"),r=s;if(t)return r.default;if(i){let{type:n}=r,o=rt(n);if(o)return ei[o]}return s}function An(s){let{token:e,typeDefinition:t}=s,i=`${ii(e)}-value`,r=wn(s);return{type:r,key:i,name:us(i),get defaultValue(){return Sn(t)},get hasCustomDefaultValue(){return Se(t)!==void 0},reader:Tn[r],writer:ti[r]||ti.default}}var ei={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Tn={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${Se(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${Se(e)}"`);return e},string(s){return s}},ti={default:On,array:si,object:si};function si(s){return JSON.stringify(s)}function On(s){return`${s}`}var R=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:r=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){let a=r?`${r}:${e}`:e,c=new CustomEvent(a,{detail:i,bubbles:n,cancelable:o});return t.dispatchEvent(c),c}};R.blessings=[dn,gn,bn,fn];R.targets=[];R.outlets=[];R.values={};var Oe=it.start();Oe.warnings=!0;Oe.debug=!1;window.Stimulus=Oe;var ds=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ms(s,e,t,i){s.addEventListener?s.addEventListener(e,t,i):s.attachEvent&&s.attachEvent("on".concat(e),function(){t(window.event)})}function ui(s,e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=s[t[i].toLowerCase()];return t}function di(s){typeof s!="string"&&(s=""),s=s.replace(/\s/g,"");for(var e=s.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Cn(s,e){for(var t=s.length>=e.length?s:e,i=s.length>=e.length?e:s,r=!0,n=0;n<t.length;n++)i.indexOf(t[n])===-1&&(r=!1);return r}var Le={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":ds?173:189,"=":ds?61:187,";":ds?59:186,"'":222,"[":219,"]":221,"\\":220},I={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},gs={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},w={16:!1,18:!1,17:!1,91:!1},v={};for(Ce=1;Ce<20;Ce++)Le["f".concat(Ce)]=111+Ce;var Ce,f=[],ai=!1,mi="all",fi=[],Me=function(e){return Le[e.toLowerCase()]||I[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Ln=function(e){return Object.keys(Le).find(function(t){return Le[t]===e})},kn=function(e){return Object.keys(I).find(function(t){return I[t]===e})};function pi(s){mi=s||"all"}function ke(){return mi||"all"}function Mn(){return f.slice(0)}function Fn(){return f.map(function(s){return Ln(s)||kn(s)||String.fromCharCode(s)})}function Pn(){var s=[];return Object.keys(v).forEach(function(e){v[e].forEach(function(t){var i=t.key,r=t.scope,n=t.mods,o=t.shortcut;s.push({scope:r,shortcut:o,mods:n,keys:i.split("+").map(function(a){return Me(a)})})})}),s}function Rn(s){var e=s.target||s.srcElement,t=e.tagName,i=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(i=!1),i}function xn(s){return typeof s=="string"&&(s=Me(s)),f.indexOf(s)!==-1}function In(s,e){var t,i;s||(s=ke());for(var r in v)if(Object.prototype.hasOwnProperty.call(v,r))for(t=v[r],i=0;i<t.length;)t[i].scope===s?t.splice(i,1):i++;ke()===s&&pi(e||"all")}function Nn(s){var e=s.keyCode||s.which||s.charCode,t=f.indexOf(e);if(t>=0&&f.splice(t,1),s.key&&s.key.toLowerCase()==="meta"&&f.splice(0,f.length),(e===93||e===224)&&(e=91),e in w){w[e]=!1;for(var i in I)I[i]===e&&($[i]=!1)}}function Bn(s){if(typeof s=="undefined")Object.keys(v).forEach(function(o){return delete v[o]});else if(Array.isArray(s))s.forEach(function(o){o.key&&fs(o)});else if(typeof s=="object")s.key&&fs(s);else if(typeof s=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=t[0],n=t[1];typeof r=="function"&&(n=r,r=""),fs({key:s,scope:r,method:n,splitKey:"+"})}}var fs=function(e){var t=e.key,i=e.scope,r=e.method,n=e.splitKey,o=n===void 0?"+":n,a=di(t);a.forEach(function(c){var h=c.split(o),b=h.length,d=h[b-1],u=d==="*"?"*":Me(d);if(!!v[u]){i||(i=ke());var C=b>1?ui(I,h):[];v[u]=v[u].filter(function(y){var L=r?y.method===r:!0;return!(L&&y.scope===i&&Cn(y.mods,C))})}})};function ci(s,e,t,i){if(e.element===i){var r;if(e.scope===t||e.scope==="all"){r=e.mods.length>0;for(var n in w)Object.prototype.hasOwnProperty.call(w,n)&&(!w[n]&&e.mods.indexOf(+n)>-1||w[n]&&e.mods.indexOf(+n)===-1)&&(r=!1);(e.mods.length===0&&!w[16]&&!w[18]&&!w[17]&&!w[91]||r||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(f),e.method(s,e)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0)))}}}function li(s,e){var t=v["*"],i=s.keyCode||s.which||s.charCode;if(!!$.filter.call(this,s)){if((i===93||i===224)&&(i=91),f.indexOf(i)===-1&&i!==229&&f.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(y){var L=gs[y];s[y]&&f.indexOf(L)===-1?f.push(L):!s[y]&&f.indexOf(L)>-1?f.splice(f.indexOf(L),1):y==="metaKey"&&s[y]&&f.length===3&&(s.ctrlKey||s.shiftKey||s.altKey||(f=f.slice(f.indexOf(L))))}),i in w){w[i]=!0;for(var r in I)I[r]===i&&($[r]=!0);if(!t)return}for(var n in w)Object.prototype.hasOwnProperty.call(w,n)&&(w[n]=s[gs[n]]);s.getModifierState&&!(s.altKey&&!s.ctrlKey)&&s.getModifierState("AltGraph")&&(f.indexOf(17)===-1&&f.push(17),f.indexOf(18)===-1&&f.push(18),w[17]=!0,w[18]=!0);var o=ke();if(t)for(var a=0;a<t.length;a++)t[a].scope===o&&(s.type==="keydown"&&t[a].keydown||s.type==="keyup"&&t[a].keyup)&&ci(s,t[a],o,e);if(i in v){for(var c=0;c<v[i].length;c++)if((s.type==="keydown"&&v[i][c].keydown||s.type==="keyup"&&v[i][c].keyup)&&v[i][c].key){for(var h=v[i][c],b=h.splitKey,d=h.key.split(b),u=[],C=0;C<d.length;C++)u.push(Me(d[C]));u.sort().join("")===f.sort().join("")&&ci(s,h,o,e)}}}}function Dn(s){return fi.indexOf(s)>-1}function $(s,e,t){f=[];var i=di(s),r=[],n="all",o=document,a=0,c=!1,h=!0,b="+",d=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(n=e.scope),e.element&&(o=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(h=e.keydown),e.capture!==void 0&&(d=e.capture),typeof e.splitKey=="string"&&(b=e.splitKey)),typeof e=="string"&&(n=e);a<i.length;a++)s=i[a].split(b),r=[],s.length>1&&(r=ui(I,s)),s=s[s.length-1],s=s==="*"?"*":Me(s),s in v||(v[s]=[]),v[s].push({keyup:c,keydown:h,scope:n,mods:r,shortcut:i[a],method:t,key:i[a],splitKey:b,element:o});typeof o!="undefined"&&!Dn(o)&&window&&(fi.push(o),ms(o,"keydown",function(u){li(u,o)},d),ai||(ai=!0,ms(window,"focus",function(){f=[]},d)),ms(o,"keyup",function(u){li(u,o),Nn(u)},d))}function $n(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(v).forEach(function(t){var i=v[t].filter(function(r){return r.scope===e&&r.shortcut===s});i.forEach(function(r){r&&r.method&&r.method()})})}var ps={getPressedKeyString:Fn,setScope:pi,getScope:ke,deleteScope:In,getPressedKeyCodes:Mn,getAllKeyCodes:Pn,isPressed:xn,filter:Rn,trigger:$n,unbind:Bn,keyMap:Le,modifier:I,modifierMap:gs};for(nt in ps)Object.prototype.hasOwnProperty.call(ps,nt)&&($[nt]=ps[nt]);var nt;typeof window!="undefined"&&(hi=window.hotkeys,$.noConflict=function(s){return s&&window.hotkeys===$&&(window.hotkeys=hi),$},window.hotkeys=$);var hi;var Vn=(s,e,t)=>{let i=s;return t===!0?i=`${e.identifier}:${s}`:typeof t=="string"&&(i=`${t}:${s}`),i},qn=(s,e,t)=>{let{bubbles:i,cancelable:r,composed:n}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(t,{originalEvent:e}),new CustomEvent(s,{bubbles:i,cancelable:r,composed:n,detail:t})};function jn(s){let e=s.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,r=e.top<=t&&e.top+e.height>0,n=e.left<=i&&e.left+e.width>0;return r&&n}var Hn={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},gi=(s,e={})=>{let t=s,{onlyVisible:i,dispatchEvent:r,events:n,eventPrefix:o}=Object.assign({},Hn,e),a=d=>{let u=(e==null?void 0:e.element)||t.element;if(!(u.contains(d.target)||!jn(u)&&i)&&(t.clickOutside&&t.clickOutside(d),r)){let C=Vn("click:outside",t,o),y=qn(C,d,{controller:t});u.dispatchEvent(y)}},c=()=>{n==null||n.forEach(d=>{window.addEventListener(d,a,!1)})},h=()=>{n==null||n.forEach(d=>{window.removeEventListener(d,a,!1)})},b=t.disconnect.bind(t);return Object.assign(t,{disconnect(){h(),b()}}),c(),[c,h]};var vs=class extends R{};vs.debounces=[];var bs=class extends R{};bs.throttles=[];var _n={enterFromClass:"enter",enterActiveClass:"enterStart",enterToClass:"enterEnd",leaveFromClass:"leave",leaveActiveClass:"leaveStart",leaveToClass:"leaveEnd"},Kn={transitioned:!1,hiddenClass:"hidden",preserveOriginalClass:!0,removeToClasses:!0},vi=(s,e={})=>{var t,i,r;let n=s,o=n.element.dataset.transitionTarget,a;o&&(a=n[`${o}Target`]);let c=(e==null?void 0:e.element)||a||n.element;if(!(c instanceof HTMLElement||c instanceof SVGElement))return;let h=c.dataset,b=parseInt(h.leaveAfter||"")||e.leaveAfter||0,{transitioned:d,hiddenClass:u,preserveOriginalClass:C,removeToClasses:y}=Object.assign({},Kn,e),L=(t=n.enter)===null||t===void 0?void 0:t.bind(n),ys=(i=n.leave)===null||i===void 0?void 0:i.bind(n),Es=(r=n.toggleTransition)===null||r===void 0?void 0:r.bind(n);function Pe(p){return l(this,null,function*(){if(n.transitioned)return;n.transitioned=!0,L&&L(p);let T=K("enterFrom",e,h),W=K("enterActive",e,h),U=K("enterTo",e,h),z=K("leaveTo",e,h);u&&c.classList.remove(u),y||Y(c,z),yield Ss(c,T,W,U,u,C,y),b>0&&setTimeout(()=>{ne(p)},b)})}function ne(p){return l(this,null,function*(){if(!n.transitioned)return;n.transitioned=!1,ys&&ys(p);let T=K("leaveFrom",e,h),W=K("leaveActive",e,h),U=K("leaveTo",e,h),z=K("enterTo",e,h);y||Y(c,z),yield Ss(c,T,W,U,u,C,y),u&&c.classList.add(u)})}function ws(p){Es&&Es(p),n.transitioned?ne():Pe()}function Ss(p,T,W,U,z,yi,Ei){return l(this,null,function*(){let oe=[];yi&&(T.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k)),W.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k)),U.forEach(k=>p.classList.contains(k)&&k!==z&&oe.push(k))),Re(p,T),Y(p,oe),Re(p,W),yield Un(),Y(p,T),Re(p,U),yield Wn(p),Y(p,W),Ei&&Y(p,U),Re(p,oe)})}function bi(){n.transitioned=d,d?(u&&c.classList.remove(u),Pe()):(u&&c.classList.add(u),ne())}function Re(p,T){T.length>0&&p.classList.add(...T)}function Y(p,T){T.length>0&&p.classList.remove(...T)}return bi(),Object.assign(n,{enter:Pe,leave:ne,toggleTransition:ws}),[Pe,ne,ws]};function K(s,e,t){let i=`transition${s[0].toUpperCase()}${s.substr(1)}`,r=_n[s],n=e[s]||t[i]||t[r]||" ";return zn(n)?[]:n.split(" ")}function Wn(s){return l(this,null,function*(){return new Promise(e=>{let t=Number(getComputedStyle(s).transitionDuration.split(",")[0].replace("s",""))*1e3;setTimeout(()=>{e(t)},t)})})}function Un(){return l(this,null,function*(){return new Promise(s=>{requestAnimationFrame(()=>{requestAnimationFrame(s)})})})}function zn(s){return s.length===0||!s.trim()}var Fe=class extends R{connect(){this.html=document.querySelector("html"),gi(this),vi(this,{element:this.menuTarget})}disconnect(){this.html.style.overflow="auto"}toggle(){!this.menuTarget.classList.contains("hidden")?(this.html.style.overflow="auto",this.menuTarget.classList.add("hidden")):(this.html.style.overflow="hidden",this.menuTarget.classList.remove("hidden"))}};Os(Fe,"targets",["menu"]);Oe.register("mobile-menu",Fe);})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=/assets/index.GGAWMKWO.js.map
